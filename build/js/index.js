webpackJsonp([0],{100:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DialogFooter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(20),d=n(48),h=n(22),m=n(47);n(533);var g=window.opener&&window.name,y=parent!==self,b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.selection).filter(function(t){return!!e.props.selection[t]&&"selectionCleared"!==t}).length,n=["btn"],r=["btn"];0===t&&(n.push("disabled"),r.push("disabled")),this.props.settings.renderSelectedOnly&&n.push("active");var a=this.props.canShowSelected&&t>0;return u.default.createElement("label",{disabled:0===t},u.default.createElement("span",null,t+" patient"+(1===t?"":"s")+" selected"+(a?":":"")),a?u.default.createElement("div",{className:"btn-group"},u.default.createElement("div",{className:n.join(" "),onClick:function(){e.props.onToggleSelectionVisibility(!e.props.settings.renderSelectedOnly)}},"View Selected"),u.default.createElement("div",{className:r.join(" "),onClick:function(){e.props.onResetSelection()}},"Clear Selected")):null)}}]),t}(u.default.Component);b.propTypes={settings:p.default.object.isRequired,selection:p.default.object.isRequired,onToggleSelectionVisibility:p.default.func.isRequired,onResetSelection:p.default.func.isRequired,canShowSelected:p.default.bool};var v=t.DialogFooter=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"export",value:function(){var e=this,t=this.props.selection;switch(this.props.settings.outputMode){case"id-array":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e});case"transactions":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).map(function(n){return e.createPatientTransaction(t[n])});case"patients":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).map(function(e){return t[e]});case"id-list":return Object.keys(t).filter(function(e){return!!t[e]&&"selectionCleared"!==e}).join(",")}}},{key:"createPatientTransaction",value:function(){throw new Error("No implemented")}},{key:"showSelectedOnly",value:function(e){if(e){var t=this.props.selection;this.props.setParam({name:"_id",value:Object.keys(t).filter(function(e){return!!t[e]}).join(",")})}else this.props.setParam({name:"_id",value:void 0});this.props.showSelectedOnly(e)}},{key:"renderDialogButtons",value:function(){var e=this;if(!g&&!y)return null;var t=window.opener||window.parent,n=Object.keys(this.props.selection).filter(function(t){return!!e.props.selection[t]}).length;return u.default.createElement("div",{className:"col-xs-6 text-right"},u.default.createElement("button",{className:"btn btn-default",onClick:function(){t.postMessage({type:"close"},"*")}},"Cancel"),u.default.createElement("button",{className:"btn btn-primary",onClick:function(){var r=!0;n<=0&&!e.props.selection.selectionCleared&&(r=window.confirm("No patients have been selected. Choose 'Cancel' to return to making a selection or 'OK' to close without selecting")),r&&t.postMessage({type:"result",data:e.export()},"*")}},"OK"))}},{key:"render",value:function(){var e=this.props.selection;return e=Object.keys(e).filter(function(t){return!!e[t]}),u.default.createElement("div",{className:"row dialog-buttons"},u.default.createElement("div",{className:"col-xs-6 text-left"},u.default.createElement(b,{selection:this.props.selection,settings:this.props.settings,onToggleSelectionVisibility:this.showSelectedOnly.bind(this),onResetSelection:this.props.resetSelection,canShowSelected:this.props.canShowSelected})),this.renderDialogButtons())}}]),t}(u.default.Component);v.propTypes={selection:p.default.object.isRequired,settings:p.default.object.isRequired,showSelectedOnly:p.default.func.isRequired,resetSelection:p.default.func.isRequired,setParam:p.default.func.isRequired,fetch:p.default.func.isRequired,canShowSelected:p.default.bool},t.default=(0,f.connect)(function(e){return{selection:e.selection,settings:e.settings,query:e.query}},function(e){return{showSelectedOnly:function(t){e((0,d.showSelectedOnly)(t)),e((0,h.fetch)())},resetSelection:function(){e((0,m.setAll)({})),e((0,d.showSelectedOnly)(!1)),e((0,h.setParam)({name:"_id",value:void 0})),e((0,h.fetch)()),e((0,m.setSelectionCleared)())},setParam:function(t,n){return e((0,h.setParam)(t,n))},fetch:function(){return e((0,h.fetch)())}}})(v)},101:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(7),d=n(99),h=r(d),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(h.default,{type:"danger"},(0,f.getErrorMessage)(this.props.error))}}]),t}(u.default.Component);m.propTypes={error:p.default.oneOfType([p.default.string,p.default.object])},m.defaultProps={error:"Unknown Error"},t.default=m},102:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l);n(536);var u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"loader"},s.default.createElement("div",null,s.default.createElement("i",{className:"fa fa-spinner spin"})," Loading..."))}}]),t}(s.default.Component);t.default=u},103:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=String(e).toLowerCase().trim().split("").reduce(function(e,t){return e+t.charCodeAt(0).toString(16)},"");t.length<11;)t+=t.length?t:"000000000000";return t}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(3),h=r(d),m=n(7);n(538);var g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.renderCanvas()}},{key:"componentDidUpdate",value:function(){this.renderCanvas()}},{key:"renderCanvas",value:function(){if(!(0,m.getPatientImageUri)(this.props.patient,this.props.base)){var e=s((0,m.getPatientName)(this.props.patient));jdenticon.update("#img-"+this.props.patient.id,e,.1)}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.patient,o=(e.base,a(e,["className","style","patient","base"])),i=(0,m.getPatientImageUri)(r,this.props.base);return t="patient-image-wrap "+(t||""),n=u({},n||{}),i&&(n.backgroundImage="url('"+i+"')",n.backgroundColor="rgba(255, 255, 255, 0.6)"),f.default.createElement("div",u({className:t,style:n},o),i?null:f.default.createElement("canvas",{width:"480",height:"480",style:{width:"100%",height:"100%"},id:"img-"+r.id}))}}]),t}(f.default.Component);g.propTypes={patient:h.default.object.isRequired,className:h.default.string,style:h.default.object,base:h.default.string},g.defaultProps={base:""},t.default=g},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CODE_SYSTEMS={LOINC:{url:"http://loinc.org"},"SNOMED-CT":{url:"http://snomed.info/sct"},RxNorm:{url:"http://www.nlm.nih.gov/research/umls/rxnorm"},CVX:{url:"http://hl7.org/fhir/sid/cvx"},NUBC:{url:"http://www.nubc.org/patient-discharge"},UMLS:{url:"http://uts.nlm.nih.gov/metathesaurus"}}},12:function(e,t){function n(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var o=r(a);return[n].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},14:function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=h[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(c(r.parts[o],t))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(c(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:i}}}}function a(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=a[0],i=a[1],l=a[2],s=a[3],u={css:i,media:l,sourceMap:s};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=v[v.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function l(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),o(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),o(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,a;if(t.singleton){var o=b++;n=y||(y=l(t)),r=p.bind(null,n,o,!1),a=p.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=d.bind(null,n,t),a=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),r=f.bind(null,n),a=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}function p(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=x(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}var h={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),y=null,b=0,v=[],x=n(530);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=m()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=a(e);return r(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var l=n[i],s=h[l.id];s.refs--,o.push(s)}if(e){r(a(e),t)}for(var i=0;i<o.length;i++){var s=o[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete h[s.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},21:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),p=r(c),f=n(3),d=r(f),h=n(7),m=n(20),g=t.Grid=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={__rows:n.sortRows(n.props.rows,n.props.comparator)},n}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){Array.isArray(e.rows)&&this.setState({__rows:this.sortRows(e.rows,e.comparator)})}},{key:"sortRows",value:function(e,t){return t?e.sort(t):e}},{key:"renderResource",value:function(e,t){var n=this.props.settings.server.url+"/"+e.resourceType+"/"+e.id;return this.props.settings.fhirViewer.enabled&&(n=this.props.settings.fhirViewer.url+(this.props.settings.fhirViewer.url.indexOf("?")>-1?"&":"?")+this.props.settings.fhirViewer.param+"="+encodeURIComponent(n)),p.default.createElement("tr",{key:t,onClick:function(){return window.open(n,"_blank")},style:{cursor:"pointer"}},this.props.cols.map(function(t,n){var r=t.render,a=t.path,o=t.cellProps,i=t.defaultValue;return o=s({},o,{key:n}),"function"==typeof r?p.default.createElement("td",o,r(e)):p.default.createElement("td",o,(0,h.getPath)(e,a)||p.default.createElement("small",{className:"text-muted"},i||"-"))}))}},{key:"renderRows",value:function(){var e=this;if(!this.state.__enableGrouping)return this.state.__rows.map(this.renderResource,this);var t=this.props.groupBy?this.props.cols.findIndex(function(t){return t.name===e.props.groupBy||t.label===e.props.groupBy}):-1,n=t>-1?this.props.cols[t].path:null;if(!n)return this.state.__rows.map(this.renderResource,this);var r={};this.state.__rows.forEach(function(t,a){var o="function"==typeof n?n(t):(0,h.getPath)(t,n);o=o||"Empty Group",r.hasOwnProperty(o)||(r[o]=[]),r[o].push(e.renderResource(t,a))});var o=[];for(var i in r)!function(t){r[t].length>1?(o.push(p.default.createElement("tr",{className:"group-header",key:t},p.default.createElement("th",{colSpan:e.props.cols.length,onClick:function(){return e.setState(a({},t,!1===e.state[t]))}},p.default.createElement("i",{className:"glyphicon glyphicon-triangle-"+(!1!==e.state[t]?"bottom":"right")})," ",t," ",p.default.createElement("small",{className:"badge"},r[t].length)))),!1!==e.state[t]&&(o=o.concat(r[t]))):(o.push(p.default.createElement("tr",{className:"group-clear",key:t})),o=o.concat(r[t]))}(i);return o}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"panel panel-default"+(this.state.__enableGrouping?" grouped":"")},this.props.title?p.default.createElement("div",{className:"panel-heading"},this.props.groupBy&&this.state.__rows.length>1&&p.default.createElement("label",{className:"pull-right"},"Group by ",this.props.groupBy," ",p.default.createElement("input",{type:"checkbox",checked:!!this.state.__enableGrouping,onChange:function(t){return e.setState({__enableGrouping:t.target.checked})}})),p.default.createElement("b",{className:"text-primary"},p.default.createElement("i",{className:"fa fa-address-card-o"})," ",this.props.title)):null,p.default.createElement("div",{className:"table-responsive"},p.default.createElement("table",{className:"table table-condensed table-hover table-striped table-bordered",style:{minWidth:200*this.props.cols.length}},p.default.createElement("thead",null,p.default.createElement("tr",null,this.props.cols.map(function(e,t){var n=e.headerProps,r=e.label;return n=s({},n,{key:t}),p.default.createElement("th",n,r||"")}))),p.default.createElement("tbody",null,this.renderRows()))))}}]),t}(p.default.Component);g.propTypes={rows:d.default.arrayOf(d.default.object).isRequired,cols:d.default.arrayOf(d.default.object).isRequired,settings:d.default.object.isRequired,title:d.default.string,groupBy:d.default.string,comparator:d.default.func},t.default=(0,m.connect)(function(e){return{settings:e.settings}})(g)},22:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.goPrev=t.goNext=t.fetch=t.setLimit=t.setTags=t.delTag=t.addTag=t.setSort=t.setQueryType=t.setQueryString=t.setParam=t.setGender=t.setConditions=t.delCondition=t.addCondition=t.setAgeGroup=t.setMaxAge=t.setMinAge=t.setData=t.setError=t.setLoading=t.queryBuilder=void 0;var a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(44),l=n(325),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=n(7),c=t.queryBuilder=new s.default((0,u.parseQueryString)(window.location.hash.split("?")[1]||"")),p=o({},c.getState(),{loading:!1,error:null,bundle:null}),f=t.setLoading=(0,i.createAction)("app/search/SET_LOADING"),d=t.setError=(0,i.createAction)("app/search/SET_ERROR"),h=t.setData=(0,i.createAction)("app/search/SET_DATA"),m=(t.setMinAge=(0,i.createAction)("app/search/SET_MIN_AGE"),t.setMaxAge=(0,i.createAction)("app/search/SET_MAX_AGE"),t.setAgeGroup=(0,i.createAction)("app/search/SET_AGE_GROUP"),t.addCondition=(0,i.createAction)("app/search/ADD_CONDITION"),t.delCondition=(0,i.createAction)("app/search/DEL_CONDITION"),t.setConditions=(0,i.createAction)("app/search/SET_CONDITIONS"),t.setGender=(0,i.createAction)("app/search/SET_GENDER"),t.setParam=(0,i.createAction)("app/search/SET_PARAM"),t.setQueryString=(0,i.createAction)("app/search/SET_QUERY_STRING"),t.setQueryType=(0,i.createAction)("app/search/SET_QUERY_TYPE"),t.setSort=(0,i.createAction)("app/search/SET_SORT"),t.addTag=(0,i.createAction)("app/search/ADD_TAG"),t.delTag=(0,i.createAction)("app/search/DEL_TAG"),t.setTags=(0,i.createAction)("app/search/SET_TAGS"),t.setLimit=(0,i.createAction)("app/search/SET_LIMIT"),t.fetch=function(){return function(e,t){e(f(!0)),e(d(null));var n=t(),r=n.settings;c.fetch(r.server).then(function(t){e(h(t)),e(f(!1))},function(t){e(d(t)),e(f(!1))})}});t.goNext=function(){return function(e,t){var n=t().query.bundle,r=(0,u.getBundleURL)(n,"next");r&&(r=(0,u.parseQueryString)(r),c.setOffset(r._getpages,+r._getpagesoffset),e(m()))}},t.goPrev=function(){return function(e,t){var n=t().query.bundle,r=(0,u.getBundleURL)(n,"previous");r&&(r=(0,u.parseQueryString)(r),c.setOffset(r._getpages,+r._getpagesoffset),e(m()))}};t.default=(0,i.handleActions)((a={},r(a,"app/search/SET_SORT",function(e,t){return c.setSort(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_QUERY_STRING",function(e,t){return c.setQueryString(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_QUERY_TYPE",function(e,t){return c.setQueryType(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_PARAM",function(e,t){return c.setParam(t.payload.name,t.payload.value),o({},e,c.getState())}),r(a,"app/search/SET_MIN_AGE",function(e,t){return c.setMinAge(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_MAX_AGE",function(e,t){return c.setMaxAge(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_AGE_GROUP",function(e,t){return c.setAgeGroup(t.payload),o({},e,c.getState())}),r(a,"app/search/ADD_CONDITION",function(e,t){return c.addCondition(t.payload.key,t.payload.value),o({},e,c.getState())}),r(a,"app/search/SET_CONDITIONS",function(e,t){return c.setConditions(t.payload),o({},e,c.getState())}),r(a,"app/search/DEL_CONDITION",function(e,t){return c.removeCondition(t.payload),o({},e,c.getState())}),r(a,"app/search/ADD_TAG",function(e,t){return c.addTag(t.payload),o({},e,c.getState())}),r(a,"app/search/DEL_TAG",function(e,t){return c.removeTag(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_TAGS",function(e,t){return c.setTags(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_GENDER",function(e,t){return c.setGender(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_LIMIT",function(e,t){return c.setLimit(t.payload),o({},e,c.getState())}),r(a,"app/search/SET_LOADING",function(e,t){return o({},e,c.getState(),{loading:!!t.payload})}),r(a,"app/search/SET_ERROR",function(e,t){return o({},e,c.getState(),{error:t.payload})}),r(a,"app/search/SET_DATA",function(e,t){return o({},e,c.getState(),{bundle:t.payload})}),a),p)},305:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),i=n(96),l=r(i),s=n(307),u=r(s),c=n(20),p=n(46),f=r(p),d=n(319),h=r(d),m=n(321),g=r(m),y=n(97),b=n(109),v=r(b),x=n(19),w=r(x);window.$=window.jQuery=w.default;var E=(0,v.default)(),_=n(327),O={origin:"http://localhost:3000",credentials:!0,optionSuccessStatus:200};u.default.use(_(O)),l.default.render(o.default.createElement(c.Provider,{store:f.default},o.default.createElement(y.Router,{history:E},o.default.createElement(y.Switch,null,o.default.createElement(u.default,null,o.default.createElement(y.Route,{path:"/",component:g.default,exact:!0}),o.default.createElement(y.Route,{path:"/patient/:index",component:h.default}))))),document.getElementById("main")),$(function(){$("body").tooltip({selector:".patient-detail-page [title]"})})},306:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),p=n(0),f=r(p),d=n(3),h=r(d);n(531);var m=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var l=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.onChangeMinValue=l.onChangeMinValue.bind(l),l.onChangeMinUnits=l.onChangeMinUnits.bind(l),l.onChangeMaxValue=l.onChangeMaxValue.bind(l),l.onChangeMaxUnits=l.onChangeMaxUnits.bind(l),l.onGroupChange=l.onGroupChange.bind(l),l.state=l._propsToState(l.props),l}return i(t,e),s(t,[{key:"_propsToState",value:function(e){var t={};return e.min&&"object"==l(e.min)&&(e.min.hasOwnProperty("value")&&(t.minValue=isNaN(e.min.value)?"":e.min.value),e.min.hasOwnProperty("units")&&(t.minUnits=e.min.units)),e.max&&"object"==l(e.max)&&(e.max.hasOwnProperty("value")&&(t.maxValue=isNaN(e.max.value)?"":e.max.value),e.max.hasOwnProperty("units")&&(t.maxUnits=e.max.units)),t}},{key:"componentWillReceiveProps",value:function(e){var t=this._propsToState(e);Object.keys(t).length&&this.setState(t)}},{key:"onChangeMinValue",value:function(e){if(this.props.onMinChange){var t={value:e.target.valueAsNumber||parseFloat(e.target.value||"0"),units:this.props.min.units};this.canSet(t,this.props.max)?this.props.onMinChange(t):this.setState(this._propsToState({min:t}))}}},{key:"onChangeMinUnits",value:function(e){if(this.props.onMinChange){var t={value:this.props.min.value,units:e.target.value};this.canSet(t,this.props.max)?this.props.onMinChange(t):this.setState(this._propsToState({min:t}))}}},{key:"onChangeMaxValue",value:function(e){if(this.props.onMaxChange){var t={value:e.target.valueAsNumber||parseFloat(e.target.value||"0"),units:this.props.max.units};this.canSet(this.props.min,t)?this.props.onMaxChange(t):this.setState(this._propsToState({max:t}))}}},{key:"onChangeMaxUnits",value:function(e){if(this.props.onMaxChange){var t={value:this.props.max.value,units:e.target.value};this.canSet(this.props.min,t)?this.props.onMaxChange(t):this.setState(this._propsToState({max:t}))}}},{key:"onGroupChange",value:function(e){this.props.onGroupChange&&this.props.onGroupChange(e.target.value)}},{key:"canSet",value:function(e,t){var n=f.default.duration(t.value,t.units);return f.default.duration(e.value,e.units)<n}},{key:"render",value:function(){var e=this.canSet({value:this.state.minValue,units:this.state.minUnits},{value:this.state.maxValue,units:this.state.maxUnits});return c.default.createElement("div",{className:"age-widget-wrap form-control input-sm"+("**custom**"==this.props.group?" custom":"")},c.default.createElement("select",{onChange:this.onGroupChange,value:this.props.group||""},c.default.createElement("option",{value:""},"Any Age"),c.default.createElement("option",{value:"infant"},"Infants (0 - 12 months, Alive only)"),c.default.createElement("option",{value:"child"},"Children (1 - 18 years, Alive only)"),c.default.createElement("option",{value:"adult"},"Adults (18 - 65 years, Alive only)"),c.default.createElement("option",{value:"elderly"},"Elderly (65+ years, Alive only)"),c.default.createElement("option",{value:"**custom**"},"**custom**"==this.props.group?"Custom Age, Alive only:":"Custom Age, Alive only")),"**custom**"==this.props.group?c.default.createElement("div",{className:"age-widget"+(e?"":" invalid")},c.default.createElement("span",null,"Min:"),c.default.createElement("input",{type:"number",value:this.state.minValue,onChange:this.onChangeMinValue,min:0,step:1}),c.default.createElement("select",{value:this.state.minUnits,onChange:this.onChangeMinUnits},c.default.createElement("option",{value:"years"},"Years"),c.default.createElement("option",{value:"months"},"Months"),c.default.createElement("option",{value:"days"},"Days"))):null,"**custom**"==this.props.group?c.default.createElement("div",{className:"age-widget"+(e?"":" invalid")},c.default.createElement("span",null,"Max:"),c.default.createElement("input",{type:"number",value:this.state.maxValue,onChange:this.onChangeMaxValue,min:0,step:1}),c.default.createElement("select",{value:this.state.maxUnits,onChange:this.onChangeMaxUnits},c.default.createElement("option",{value:"years"},"Years"),c.default.createElement("option",{value:"months"},"Months"),c.default.createElement("option",{value:"days"},"Days"))):null)}}]),t}(c.default.Component);m.propTypes={min:h.default.shape({value:h.default.number,units:h.default.oneOf(["years","months","days"])}),max:h.default.shape({value:h.default.number,units:h.default.oneOf(["years","months","days"])}),group:h.default.string,onMinChange:h.default.func,onMaxChange:h.default.func,onGroupChange:h.default.func,update:h.default.func},m.defaultProps={min:{value:0,units:"years"},max:{value:100,units:"years"},group:"",update:function(){return alert("No update function provided!")}},t.default=m},307:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(3),h=r(d),m=n(19),g=r(m),y=n(360),b=r(y),v=n(20),x=n(102),w=r(x),E=n(101),_=r(E),O=n(22),S=n(48),j=n(7);n(532);var P=window.opener||(window.parent===self?null:window.parent),k=t.App=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.state={error:null},l}return l(t,e),c(t,[{key:"handleUiBlocking",value:function(){var e=0,t=void 0,n=function(){t&&clearTimeout(t),e>0?(0,g.default)("#overlay").show():t=setTimeout(function(){(0,g.default)("#overlay").hide()},200)};(0,g.default)(document).ajaxStart(function(){e++,n()}),(0,g.default)(document).ajaxComplete(function(){e=Math.max(--e,0),n()})}},{key:"componentDidMount",value:function(){var e=this;this.handleUiBlocking();var t=(0,j.parseQueryString)(window.location.search),n=t.config,r=a(t,["config"]),o={};g.default.ajax({url:"./config/"+(n||"default")+".json5",dataType:"text",cache:!1}).then(function(e){e=b.default.parse(e),g.default.ajaxSetup({timeout:e.timeout||2e4}),o=u({},e,r)},function(e){console.warn("Loading custom config: "+e.statusText)}).always(function(){var t=!1,n=function(n){"config"==n.data.type&&n.data.data&&"object"==s(n.data.data)&&(t=!0,e.props.dispatch((0,S.merge)(n.data.data)),e.props.dispatch((0,O.fetch)()))};e.props.dispatch((0,S.merge)(o)),e.props.dispatch((0,O.setLimit)(o.patientsPerPage)),P?(window.addEventListener("unload",function(){P.postMessage({type:"close"},"*")}),window.addEventListener("message",n),setTimeout(function(){window.removeEventListener("message",n),t||e.props.dispatch((0,O.fetch)())},1e3),P.postMessage({type:"ready"},"*")):e.props.dispatch((0,O.fetch)())})}},{key:"render",value:function(){return this.state.error?f.default.createElement(_.default,{error:this.state.error}):this.props.settings&&this.props.settings.loaded?f.default.createElement("div",{className:"app"},this.props.children):f.default.createElement("div",{className:"app"},f.default.createElement(w.default,null))}}]),t}(f.default.Component);k.propTypes={children:h.default.any,settings:h.default.object.isRequired,dispatch:h.default.func.isRequired},t.default=(0,v.connect)(function(e){return u({},e)})(k)},308:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(21),d=r(f),h=n(7),m=n(45),g=r(m),y=n(0),b=r(y),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(d.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"CarePlan",groupBy:"Category",comparator:function(e,t){var n=(0,h.getPath)(e,"period.start"),r=(0,h.getPath)(t,"period.start");return n=n?+(0,b.default)(n):0,(r=r?+(0,b.default)(r):0)-n},cols:[{label:"Category",path:"category.0.coding.0.display",render:function(e){return u.default.createElement("b",null,(0,h.getPath)(e,"category.0.coding.0.display"))}},{label:"Reason",render:function(e){return(e.activity||[]).map(function(e,t){var n=(0,h.getPath)(e,"detail.code.coding.0.display")||"";return n?u.default.createElement("div",{key:t},n,u.default.createElement("span",null," - "),u.default.createElement("span",{className:"text-muted"},(0,h.getPath)(e,"detail.status")||"no data")):""})}},{label:"Period",render:function(e){return(0,g.default)(e.period)}},{label:"Status",path:"status"}]})}}]),t}(u.default.Component);v.propTypes={resources:p.default.arrayOf(p.default.object)},t.default=v},309:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(104),d=n(21),h=r(d),m=n(33),g=r(m),y=n(7),b=n(0),v=r(b),x=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.resources||[],t=e.length;return u.default.createElement(h.default,{rows:(e||[]).map(function(e){return e.resource}),title:t+" Condition"+(1===t?"":"s"),comparator:function(e,t){var n=(0,y.getPath)(e,"onsetDateTime"),r=(0,y.getPath)(t,"onsetDateTime");return n=n?+(0,v.default)(n):0,(r=r?+(0,v.default)(r):0)-n},cols:[{label:"Condition",render:function(e){var t="-",n="-",r="";if(e.code&&(e.code.text&&(t=e.code.text),Array.isArray(e.code.coding)&&e.code.coding.length)){var a=e.code.coding[0];r=a.system;for(var o in f.CODE_SYSTEMS)if(f.CODE_SYSTEMS[o].url===a.system){r="("+o+")";break}a.display&&(t=a.display),a.code&&(n=a.code)}return u.default.createElement("div",null,u.default.createElement("b",null,t),u.default.createElement("small",{className:"text-muted pull-right"},n," ",r))}},{label:u.default.createElement("div",{className:"text-center"},"Clinical Status"),render:function(e){return u.default.createElement("div",{className:"text-center"},(0,y.getCodeOrConcept)(e.clinicalStatus))}},{label:u.default.createElement("div",{className:"text-center"},"Verification Status"),render:function(e){return u.default.createElement("div",{className:"text-center"},(0,y.getCodeOrConcept)(e.verificationStatus))}},{label:u.default.createElement("div",{className:"text-center"},"Onset Date"),render:function(e){var t=e.onsetDateTime||"";return u.default.createElement("div",{className:"text-center"},t?u.default.createElement(g.default,{moment:e.onsetDateTime}):"-")}}]})}}]),t}(u.default.Component);x.propTypes={resources:p.default.arrayOf(p.default.object)},t.default=x},310:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return e.class&&"object"==c(e.class)?(0,v.getPath)(e,"class.type.0.text"):e.class}function s(e){var t=(0,v.getPath)(e,"type.0.text");if(t)return t;var n=l(e);return n?n+" encounter":""}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(1),f=r(p),d=n(3),h=r(d),m=n(0),g=r(m),y=n(21),b=r(y),v=n(7),x=n(45),w=r(x),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return f.default.createElement(b.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Encounter"+(1===this.props.resources.length?"":"s"),groupBy:"Type",comparator:function(e,t){var n=(0,v.getPath)(e,"period.start"),r=(0,v.getPath)(t,"period.start");return n=n?+(0,g.default)(n):0,(r=r?+(0,g.default)(r):0)-n},cols:[{label:"Type",path:function(e){return s(e)},render:function(e){var t=(0,v.getPath)(e,"type.0.text");if(t)return f.default.createElement("b",null,t);var n=l(e);return n?f.default.createElement("span",{className:"text-muted"},n+" encounter"):f.default.createElement("small",{className:"text-muted"},"N/A")}},{label:"Reason",path:"reason.0.coding.0.display",defaultValue:"N/A"},{label:"Class",render:function(e){var t=l(e);return t?f.default.createElement("b",null,t):f.default.createElement("small",{className:"text-muted"},"N/A")}},{label:"Status",path:"status",defaultValue:"N/A"},{label:"Time",path:"period",render:function(e){return(0,w.default)(e.period||{})}}]})}}]),t}(f.default.Component);E.propTypes={resources:h.default.arrayOf(h.default.object)},t.default=E},311:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(0),d=r(f),h=n(21),m=r(h),g=n(33),y=r(g),b=n(7),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Immunizations",groupBy:"Type",comparator:function(e,t){var n=(0,b.getPath)(e,"date"),r=(0,b.getPath)(t,"date");return n=n?+(0,d.default)(n):0,(r=r?+(0,d.default)(r):0)-n},cols:[{label:"Type",path:"vaccineCode.coding.0.display"},{label:"Status",render:function(e){return e.status||"-"}},{label:"Date",render:function(e){return e.date?u.default.createElement(y.default,{moment:e.date}):e.occurrenceDateTime?u.default.createElement(y.default,{moment:e.occurrenceDateTime}):e.occurrenceString||"-"}}]})}}]),t}(u.default.Component);v.propTypes={resources:p.default.arrayOf(p.default.object)},t.default=v},312:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(0),d=r(f),h=n(7),m=n(21),g=r(m),y=n(316),b=r(y),v=n(315),x=r(v),w=n(45),E=r(w),_=n(33),O=r(_),S=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getObservationLabel",value:function(e){return(0,h.getPath)(e,"code.coding.0.display")||(0,h.getPath)(e,"code.text")||(0,h.getPath)(e,"valueQuantity.code")}},{key:"renderObservation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e.component))return e.component.map(function(e,n){var r=t.renderObservation(e,!0);return u.default.createElement("span",{key:n},n>0&&u.default.createElement("span",null,", "),r)});var r=function(r){return u.default.createElement("span",null,n&&u.default.createElement("label",{className:"text-muted"},t.getObservationLabel(e).replace(/^\s*(Systolic|Diastolic)\s+blood\s+pressure\s*$/gi,"$1"),": "),r)};if(e.hasOwnProperty("valueBoolean"))return r(e.valueBoolean&&"false"!=e.valueBoolean?"Positive":"Negative");if(e.hasOwnProperty("valueString"))return r(String(e.valueString));if(e.hasOwnProperty("valueRange"))return r(u.default.createElement(b.default,{range:e.valueRange}));if(e.hasOwnProperty("valueTime"))return r(u.default.createElement(x.default,{moment:e.valueTime}));if(e.hasOwnProperty("valueDateTime"))return r(u.default.createElement(O.default,{moment:e.valueDateTime}));if(e.hasOwnProperty("valuePeriod"))return r((0,E.default)(e.valuePeriod));if(e.hasOwnProperty("valueCodeableConcept"))return r((0,h.getPath)(e,"valueCodeableConcept.coding.0.display"));if(e.hasOwnProperty("valueQuantity")){var a=(0,h.getPath)(e,"valueQuantity.value"),o=(0,h.getPath)(e,"valueQuantity.unit");return isNaN(parseFloat(a))||(a=Math.round(100*a)/100),r(u.default.createElement("span",null,a," ",u.default.createElement("span",{className:"text-muted"},o)))}return r(u.default.createElement("span",{className:"text-muted"},"N/A"))}},{key:"render",value:function(){var e=this;return u.default.createElement(g.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:"Observations",groupBy:"Name",comparator:function(e,t){var n=(0,h.getPath)(e,"effectiveDateTime")||(0,h.getPath)(e,"meta.lastUpdated"),r=(0,h.getPath)(t,"effectiveDateTime")||(0,h.getPath)(t,"meta.lastUpdated");return n=n?+(0,d.default)(n):0,(r=r?+(0,d.default)(r):0)-n},cols:[{label:"Name",path:function(t){return e.getObservationLabel(t)},render:function(t){return u.default.createElement("b",null,e.getObservationLabel(t))}},{label:"Value",render:function(t){return e.renderObservation(t)}},{label:"Date",render:function(e){var t=(0,h.getPath)(e,"effectiveDateTime")||(0,h.getPath)(e,"meta.lastUpdated");return t&&(t=(0,d.default)(t).format("MM/DD/YYYY")),u.default.createElement("div",{className:"text-muted"},t||"-")}}]})}}]),t}(u.default.Component);S.propTypes={resources:p.default.arrayOf(p.default.object)},t.default=S},313:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(0),d=r(f),h=n(21),m=r(h),g=n(33),y=r(g),b=n(7),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement(m.default,{rows:(this.props.resources||[]).map(function(e){return e.resource}),title:this.props.title,comparator:function(e,t){var n=(0,b.getPath)(e,"birthDate"),r=(0,b.getPath)(t,"birthDate");return n=n?+(0,d.default)(n):0,(r=r?+(0,d.default)(r):0)-n},cols:[{label:"Identifier",render:function(e){var t=[u.default.createElement("tr",{key:"id"},u.default.createElement("td",{className:"label-cell"},"ID"),u.default.createElement("td",null,e.id))];return Array.isArray(e.identifier)&&(t=t.concat(e.identifier.map(function(e){var t=(0,b.getPath)(e,"type.coding.0.display")||(0,b.getPath)(e,"type.text")||(0,b.getPath)(e,"type.coding.0.code")||String((0,b.getPath)(e,"system")||"").split(/\b/).pop();return t?u.default.createElement("tr",{key:t},u.default.createElement("td",{className:"label-cell"},t),u.default.createElement("td",null,e.value)):null}).filter(Boolean))),u.default.createElement("table",null,u.default.createElement("tbody",null,t))}},{label:"Name",render:b.getPatientName,defaultValue:"N/A"},{label:"Gender",path:"gender",defaultValue:"N/A"},{label:"Birth Date",path:"birthDate",defaultValue:"N/A",render:function(e){return u.default.createElement(y.default,{moment:e.birthDate})}}]})}}]),t}(u.default.Component);v.propTypes={resources:p.default.arrayOf(p.default.object),title:p.default.string},v.defaultProps={title:"Person"},t.default=v},314:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){var r=[],a=function(t){var n=(0,b.getPath)(e,t.path);if(void 0!==n){var a=t.render?t.render(e):n,o=t.raw?t.raw(e):a,i="function"==typeof t.label?t.label(e):t.label,l=r.find(function(e){return e.value===o});return l?l.label+=", "+i:r.push({label:i,value:a}),!0}return!1};return t.forEach(a),r.length||n.some(a),r.length?d.default.createElement("table",null,d.default.createElement("tbody",null,r.map(function(e,t){return d.default.createElement("tr",{key:t},d.default.createElement("td",{className:"label-cell"},e.label),d.default.createElement("td",null,e.value))}))):"-"}function s(e){for(var t=["authoredOn","dateWritten","performedDateTime","recorded","performedPeriod.start","availableTime.0.availableStartTime","whenHandedOver","issued","effectiveDateTime","assertedDate","meta.lastUpdated"],n=0,r=t.length;n<r;n++){var a=(0,b.getPath)(e,t[n]);if(void 0!==a)return a}return 0}function u(e){var t=e.settings,n=e.path,r=e.children,a=t.server.url+"/"+n;return t.fhirViewer.enabled&&(a=t.fhirViewer.url+(t.fhirViewer.url.indexOf("?")>-1?"&":"?")+t.fhirViewer.param+"="+encodeURIComponent(a)),d.default.createElement("a",{onClick:function(){return window.open(a,"_blank"),!1}},r)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),h=n(3),m=r(h),g=n(21),y=r(g),b=n(7),v=n(45),x=r(v),w=n(33),E=r(w),_=n(0),O=r(_);u.propTypes={settings:m.default.object.isRequired,path:m.default.string.isRequired,children:m.default.any};var S=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),p(t,[{key:"determineSchema",value:function(e){var t=this,n=[];return e?(n.push({label:"Identifier",render:function(e){return l(e,[{path:"id",label:"ID",ellipsis:15},{path:"name",label:"Name"},{path:"identifier.0.type.coding.0.code",label:"Identifiers",render:function(e){return Array.isArray(e.identifier)?e.identifier.map(function(e){var t=(0,b.getPath)(e,"type.coding.0.code");return t?t+": "+e.value:null}).filter(Boolean).join(", "):"-"}}])}}),n.push({label:"Details",render:function(e){return l(e,[{path:"description.text",label:"Description"},{path:"code.text",label:"Code"},{path:"code.coding.0.display",label:"Display"},{path:"medicationCodeableConcept.coding.0.display",label:"Medication"},{path:"medicationCodeableConcept.coding.0.code",label:function(e){return((0,b.getPath)(e,"medicationCodeableConcept.coding.0.system")||"").split(/\b/).pop()}},{path:"code.coding.0.code",label:function(e){return((0,b.getPath)(e,"code.coding.0.system")||"").replace(/\/$/,"").split(/\//).pop()+" code"}},{path:"result.0.display",label:"Result",render:function(e){return e.result.map(function(e){return e.display||0}).filter(Boolean).join(", ")}},{label:"Status",render:function(e){return(0,b.getCodeOrConcept)(e.status)}},{label:"Clinical Status",render:function(e){return(0,b.getCodeOrConcept)(e.clinicalStatus)}},{label:"Verification Status",render:function(e){return(0,b.getCodeOrConcept)(e.verificationStatus)}},{label:"Value as String",path:"valueString"},{label:"Comment",path:"comment"},{label:"Extra Details",path:"extraDetails"},{label:"Type",path:"type",render:function(e){return Array.isArray(e.type)?e.type.map(function(e){return e.text||(0,b.getPath)(e,"coding.0.display")||""}).filter(Boolean).join(", "):String((0,b.getPath)(e,"type.coding.0.display")||(0,b.getPath)(e,"type.text")||e.type)}},{label:"Criticality",path:"criticality"},{label:"Category",path:"category",render:function(e){function t(e){return e?"string"==typeof e?e:Array.isArray(e)?e.map(t).join(", "):"object"!=(void 0===e?"undefined":c(e))?"N/A":e.text||e.display||e.code||t(e.coding):"N/A"}return t(e.category)}},{label:"Quantity",path:"quantity.value",render:function(e){return d.default.createElement("span",null,e.quantity.value,d.default.createElement("span",{className:"text-muted"}," ",e.quantity.unit||e.quantity.units||""))}},{label:"Days Supply",path:"daysSupply.value",render:function(e){return d.default.createElement("span",null,e.daysSupply.value,d.default.createElement("span",{className:"text-muted"}," ",e.daysSupply.unit||e.daysSupply.units||""))}},{label:"Medication",path:"medicationReference.reference",render:function(e){return d.default.createElement(u,{settings:t.props.settings,path:e.medicationReference.reference},e.medicationReference.reference)}}],[{path:"text.div",label:"Text",render:function(e){return d.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.text.div}})}}])}}),n.push({label:"Date",render:function(e){return l(e,[{path:"authoredOn",label:"Authored On",render:function(e){return d.default.createElement(E.default,{moment:e.authoredOn})}},{path:"dateWritten",label:"Date Written",render:function(e){return d.default.createElement(E.default,{moment:e.dateWritten})}},{path:"performedDateTime",label:"Performed At",render:function(e){return d.default.createElement(E.default,{moment:e.performedDateTime})}},{path:"recorded",label:"Recorded",render:function(e){return d.default.createElement(E.default,{moment:e.recorded})}},{path:"performedPeriod",label:"Performed",render:function(e){return(0,x.default)(e.performedPeriod)}},{path:"availableTime",label:"Available Time",render:function(e){if(Array.isArray(e.availableTime))return e.availableTime.map(function(e,t){return d.default.createElement("div",{key:t},e.availableStartTime&&d.default.createElement("span",null,d.default.createElement("label",null,"from: "),d.default.createElement("span",null,e.availableStartTime," ")),e.availableEndTime&&d.default.createElement("span",null,d.default.createElement("label",null,"to: "),d.default.createElement("span",null,e.availableEndTime)))})}},{path:"whenHandedOver",label:"Handed Over",render:function(e){return d.default.createElement(E.default,{moment:e.whenHandedOver})}},{path:"issued",label:"Issued",raw:function(e){return(0,O.default)(e.issued).format("MM/DD/YYYY")},render:function(e){return d.default.createElement(E.default,{moment:e.issued})}},{path:"effectiveDateTime",label:"Effective",raw:function(e){return(0,O.default)(e.effectiveDateTime).format("MM/DD/YYYY")},render:function(e){return d.default.createElement(E.default,{moment:e.effectiveDateTime})}},{path:"assertedDate",label:"Asserted",raw:function(e){return e.assertedDate},render:function(e){return d.default.createElement(E.default,{moment:e.assertedDate})}}],[{path:"meta.lastUpdated",label:"Last Updated",raw:function(e){return e.meta.lastUpdated},render:function(e){return d.default.createElement(E.default,{moment:e.meta.lastUpdated})}}])}}),n):n}},{key:"render",value:function(){var e=this.props.resources||[],t=e.length;return d.default.createElement(y.default,{rows:e.map(function(e){return e.resource}),title:t+" resource"+(1===t?"":"s")+" of type "+this.props.type,cols:this.determineSchema(e[0].resource),comparator:function(e,t){var n=s(e),r=s(t);return n=n?+(0,O.default)(n):0,(r=r?+(0,O.default)(r):0)-n}})}}]),t}(d.default.Component);S.propTypes={type:m.default.string,resources:m.default.arrayOf(m.default.object).isRequired,settings:m.default.object.isRequired},t.default=S},315:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.moment,n=e.format,r=void 0===n?"HH:mm":n,o=a(e,["moment","format"]);return l.default.createElement("span",o,(0,p.default)(t).format(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),l=r(i),s=n(3),u=r(s),c=n(0),p=r(c);o.propTypes={format:u.default.string,moment:u.default.oneOfType([u.default.string,u.default.instanceOf(Date),u.default.object]).isRequired}},316:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.range,n=t.low,r=t.high;return i.default.createElement("span",null,void 0!==n&&i.default.createElement("span",null,i.default.createElement("span",{className:"text-muted"},"low: "),i.default.createElement("span",null,n)),void 0!==r&&i.default.createElement("span",null,void 0!==n&&i.default.createElement("span",null," "),i.default.createElement("span",{className:"text-muted"},"high: "),i.default.createElement("span",null,r)),void 0===r&&void 0===n&&i.default.createElement("small",{className:"text-muted"},"N/A"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),i=r(o),l=n(3),s=r(l);a.propTypes={range:s.default.object.isRequired}},317:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(22),d=n(7),h=n(100),m=r(h);n(534);var g=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.query.error?" Error! ":" Loading... ",n=this.props.bundle,r=n&&(0,d.getBundleURL)(n,"previous"),a=n&&(0,d.getBundleURL)(n,"next");if(n&&!this.props.query.error)if(this.props.query.params._id)t="Showing the selected patients only";else{var o=n&&n.entry?n.entry.length:0;if(o){var i=+(this.props.query.offset||0)+1,l=i+o-1;t=" patient "+i+" to "+l+" ","total"in n&&(t+=" of "+n.total+" ")}else t=" No Records! "}return u.default.createElement("div",{className:"app-footer"},u.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-3 col-sm-4 text-right"},u.default.createElement("a",{href:"#prev",onClick:function(t){t.preventDefault(),e.props.dispatch((0,f.goPrev)())},disabled:!r},u.default.createElement("i",{className:"fa fa-arrow-left"})," Prev")),u.default.createElement("div",{className:"col-xs-6 col-sm-4 text-center"},t),u.default.createElement("div",{className:"col-xs-3 col-sm-4 text-left"},u.default.createElement("a",{href:"#next",onClick:function(t){t.preventDefault(),e.props.dispatch((0,f.goNext)())},disabled:!a},"Next ",u.default.createElement("i",{className:"fa fa-arrow-right"})))),u.default.createElement(m.default,{canShowSelected:this.props.canShowSelected})))}}]),t}(u.default.Component);g.propTypes={bundle:p.default.object,query:p.default.object.isRequired,dispatch:p.default.func.isRequired,selection:p.default.object.isRequired,canShowSelected:p.default.bool},t.default=g},318:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c);n(535);var f=n(22),d=n(46),h=r(d),m=n(323),g=r(m),y=n(306),b=r(y),v=n(322),x=r(v),w=n(7),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;"automatic"==this.props.settings.submitStrategy&&(this.fetchDelay&&clearTimeout(this.fetchDelay),this.fetchDelay=setTimeout(function(){h.default.dispatch((0,f.fetch)())},e))}},{key:"renderAdvancedTabContents",value:function(){return u.default.createElement("div",{className:"form-group"},u.default.createElement("p",{className:"text-warning",style:{padding:"0 5px 5px",margin:0}},u.default.createElement("i",{className:"fa fa-info-circle"})," In advanced mode, provide a query string to browse and select from a list of matching patients. ",u.default.createElement("a",{target:"_blank",href:"http://hl7.org/fhir/patient.html#search"},"More Info...")),u.default.createElement("form",{onSubmit:function(e){e.preventDefault(),h.default.dispatch((0,f.fetch)())}},u.default.createElement("div",{className:"input-group input-group-sm"},u.default.createElement("span",{className:"input-group-addon"},"/Patient?"),u.default.createElement("input",{type:"text",className:"form-control",placeholder:"Patient Search Query String",name:"query",onChange:function(e){return h.default.dispatch((0,f.setQueryString)(e.target.value))},value:this.props.query.queryString}),u.default.createElement("span",{className:"input-group-btn"},u.default.createElement("button",{className:"btn btn-warning",type:"submit"},"Go")))))}},{key:"renderDemographicsTabContents",value:function(){var e=this;return u.default.createElement("form",{onSubmit:function(e){e.preventDefault(),h.default.dispatch((0,f.fetch)())}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"**custom**"===this.props.query.ageGroup?"col-sm-6":"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement("div",{className:"input-group"},u.default.createElement("span",{className:"input-group-addon"},u.default.createElement("small",null,"Name:")),u.default.createElement("input",{type:"text",className:"form-control input-sm",placeholder:"Search by name...",value:this.props.query.params.name||"",onChange:function(t){h.default.dispatch((0,f.setParam)({name:"name",value:t.target.value})),e.fetch()}})))),u.default.createElement("div",{className:"col-sm-6"},u.default.createElement("div",{className:"form-group"},u.default.createElement("select",{className:"form-control input-sm",onChange:function(t){h.default.dispatch((0,f.setGender)(t.target.value)),e.fetch()},value:this.props.query.gender||""},u.default.createElement("option",{value:"male"},"Males"),u.default.createElement("option",{value:"female"},"Females"),u.default.createElement("option",{value:""},"Any Gender")))),u.default.createElement("div",{className:"**custom**"===this.props.query.ageGroup?"col-sm-12":"col-sm-6"},u.default.createElement("div",{className:"form-group"},u.default.createElement(b.default,{min:this.props.query.minAge||{value:0,units:"years"},max:this.props.query.maxAge||{value:100,units:"years"},onMinChange:function(t){h.default.dispatch((0,f.setMinAge)(t)),e.fetch()},onMaxChange:function(t){h.default.dispatch((0,f.setMaxAge)(t)),e.fetch()},onGroupChange:function(t){h.default.dispatch((0,f.setAgeGroup)(t)),e.fetch()},group:this.props.query.ageGroup})))))}},{key:"renderConditionsTabContents",value:function(){var e=this;return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement(g.default,{tags:Object.keys(this.props.settings.server.conditions).map(function(t){var n=e.props.settings.server.conditions[t];return{key:t,label:n.description,data:n}}),onChange:function(t){var n={};t.forEach(function(e){n[e.key]=e.data}),h.default.dispatch((0,f.setConditions)(n)),e.fetch()},label:"condition code",selected:Object.keys(this.props.query.conditions)}))))}},{key:"renderTagsTabContents",value:function(){var e=this,t=this.props.query.tags||this.props.settings.server.tags.filter(function(e){return!!e.selected}).map(function(e){return!!e.key});return u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-12"},u.default.createElement("div",{className:"form-group"},u.default.createElement(g.default,{tags:this.props.settings.server.tags,selected:t,onChange:function(t){var n=Object.keys(t).map(function(e){return t[e].key});h.default.dispatch((0,f.setTags)(n)),e.fetch()},label:"tag"}))))}},{key:"render",value:function(){var e=(0,w.parseQueryString)(this.props.location.search),t="advanced"==this.props.query.queryType,n=Object.keys(this.props.query.conditions).length,r=0,a=Object.keys(this.props.query.tags).length,o=["demographics","conditions"];this.props.settings.hideTagSelector||o.push("tags");var i=e._tab||"";return-1==o.indexOf(i)&&(i="demographics"),this.props.query.gender&&(r+=1),this.props.query.params.name&&(r+=1),null===this.props.query.maxAge&&null===this.props.query.minAge||(r+=1),u.default.createElement("div",{className:"app-header"},u.default.createElement("div",{style:{flexDirection:"row"}},u.default.createElement("label",{className:"pull-right advanced-label text-warning"},"Advanced ",u.default.createElement("span",{className:"hidden-xs"},"Mode ")," ",u.default.createElement("input",{type:"checkbox",checked:t,onChange:function(e){h.default.dispatch((0,f.setQueryType)(e.target.checked?"advanced":"basic"))}})),t?u.default.createElement("ul",{className:"nav nav-tabs"}):u.default.createElement("ul",{className:"nav nav-tabs"},u.default.createElement("li",{className:t||"demographics"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","demographics")}},u.default.createElement("b",null,"Demographics"),r?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},r)):null)),u.default.createElement("li",{className:t||"conditions"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","conditions")}},u.default.createElement("b",null,"Conditions"),n?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},n)):null)),this.props.settings.hideTagSelector||this.props.query.params._id?null:u.default.createElement("li",{className:t||"tags"!=i?null:"active"},u.default.createElement("a",{href:"",onClick:function(e){e.preventDefault(),(0,w.setHashParam)("_tab","tags")}},u.default.createElement("b",null,"Tags"),a?u.default.createElement("span",{className:"hidden-xs"}," ",u.default.createElement("small",{className:"badge"},a)):null)))),u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane "+(t?"active":"")},this.renderAdvancedTabContents()),u.default.createElement("div",{className:"tab-pane "+(t||"demographics"!=i?"":"active")},this.renderDemographicsTabContents()),u.default.createElement("div",{className:"tab-pane "+(t||"conditions"!=i?"":"active")},this.renderConditionsTabContents()),this.props.settings.hideTagSelector||this.props.query.params._id?null:u.default.createElement("div",{className:"tab-pane "+(t||"tags"!=i?"":"active")},this.renderTagsTabContents()),t||"manual"!=this.props.settings.submitStrategy?null:u.default.createElement("div",{className:"text-right",style:{height:0}},u.default.createElement("button",{type:"button",onClick:function(){return h.default.dispatch((0,f.fetch)())},className:"btn btn-primary btn-submit"},u.default.createElement("i",{className:"fa fa-search"})," Search"))),t?null:u.default.createElement(x.default,{sort:this.props.query.sort,onChange:function(e){h.default.dispatch((0,f.setSort)(e)),h.default.dispatch((0,f.fetch)())}}))}}]),t}(u.default.Component);E.propTypes={settings:p.default.object.isRequired,query:p.default.object.isRequired,location:p.default.object.isRequired,urlParams:p.default.object.isRequired},t.default=E},319:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PatientDetail=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),p=n(3),f=r(p),d=n(103),h=r(d),m=n(102),g=r(m),y=n(20),b=n(19),v=r(b),x=n(61),w=n(100),E=r(w),_=n(47),O=n(46),S=r(O),j=n(22),P=n(312),k=r(P),N=n(311),C=r(N),T=n(309),A=r(T),M=n(310),D=r(M),R=n(308),I=r(R),q=n(313),U=r(q),F=n(314),L=r(F),B=n(7);n(537);var G=t.PatientDetail=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.query=j.queryBuilder.clone(),s.state={loading:!1,error:null,conditions:[],patient:{},index:0,hasNext:!1,groups:{},selectedSubCat:"",bundle:v.default.isEmptyObject(s.props.query.bundle)?null:l({},s.props.query.bundle)},s}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.fetch(this.props.match.params.index)}},{key:"componentWillReceiveProps",value:function(e){e.match.params.index!==this.props.match.params.index&&this.fetch(e.match.params.index)}},{key:"fetch",value:function(e){var t=this;if((e=(0,B.intVal)(e,-1))<0)return this.setState({error:new Error("Invalid patient index")});this.setState({loading:!0,index:e},function(){t.fetchPatient(t.props.settings.server,e).then(function(e){t.setState(l({},e,{error:null,loading:!1}))}).catch(function(e){t.setState({loading:!1,error:e})})})}},{key:"fetchPatient",value:function(e,t){var n=this;return Promise.resolve(l({},this.state)).then(function(t){return n.query.cacheId=null,n.query.offset=null,n.query.fetch(e).then(function(e){return t.bundle=e,t})}).then(function(e){return(t=(0,B.intVal)(t,-1))<0?Promise.reject("Invalid patient index"):(e.patient=(0,B.getPath)(e,"bundle.entry."+t+".resource"),e.nextURL=(0,B.getBundleURL)(e.bundle,"next"),e.hasNext=!!e.nextURL||!!e.patient&&t<e.bundle.entry.length-1,Promise.resolve(e))}).then(function(r){if(!r.patient){var a=(0,B.parseQueryString)(r.nextURL);return n.query.setOffset(a._getpages,t),n.query.fetch(e).then(function(e){return r.bundle=e,r.patient=(0,B.getPath)(r,"bundle.entry.0.resource"),r.hasNext=!!r.patient&&(n.query.limit&&n.query.limit>1?r.bundle.entry.length>1:(0,B.getBundleURL)(r.bundle,"next")),r})}return r}).then(function(e){return new Promise(function(t){n.setState(e,function(){return t(e)})})}).then(function(t){return(0,B.getAllPages)({url:e.url+"/Patient/"+t.patient.id+"/$everything?_count=500",headers:e.headers}).then(function(e){var n={};return e.forEach(function(e){var t=(0,B.getPath)(e,"resource.resourceType")||"Other",r=t;if("Observation"==r){var a=String((0,B.getPath)(e,"resource.category.0.text")||(0,B.getPath)(e,"resource.category.coding.0.code")||(0,B.getPath)(e,"resource.category.0.coding.0.code")||"Other").toLowerCase();a=a.split(/\-+/).map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(" "),r+=" - "+a}Array.isArray(n[r])||(n[r]=[]),n[r].push(e)}),t.groups=n,t})}).then(function(e){return Promise.resolve(e)},function(e){return Promise.reject(new Error((0,B.getErrorMessage)(e)))})}},{key:"renderPatient",value:function(){var e=this;if(this.state.error)return this.state.error+"";var t=(this.state.patient.id||"").toLowerCase(),n=t&&Object.keys(this.props.selection).find(function(e){return e.toLowerCase()==t}),r=n&&!1!==this.props.selection[n];return c.default.createElement("div",{className:"panel panel-default patient col-xs-12"},c.default.createElement("div",{className:"row"},this.state.loading?c.default.createElement(g.default,null):null,c.default.createElement("div",{className:"col-xs-2 col-sm-2 col-md-1"},c.default.createElement("div",{className:"embed-responsive"},c.default.createElement(h.default,{patient:this.state.patient,className:"embed-responsive-item",base:this.props.settings.server.url}))),c.default.createElement("div",{className:"col-xs-10 col-md-11"},c.default.createElement("div",{className:"patient-row"},c.default.createElement("div",{className:"col-xs-7 patient-name"},c.default.createElement("h3",{className:"pull-left text-primary"},(0,B.getPatientName)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),r?c.default.createElement("i",{className:"label label-success pull-left"},"Selected"):null),c.default.createElement("div",{className:"col-xs-5 text-right",style:{paddingRight:0}},c.default.createElement("button",{type:"button",className:"btn btn-sm btn-"+(r?"danger":"primary"),onClick:function(){return S.default.dispatch((0,_.toggle)({id:e.state.patient.id}))}},r?"Unselect":"Select"),c.default.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return e.fetch(e.props.match.params.index)}},c.default.createElement("i",{className:"fa fa-refresh"})," Reload"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Gender:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},this.state.patient.gender||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"DOB:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},this.state.patient.birthDate||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Age:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},(0,B.getPatientAge)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Email"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientEmail)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Phone:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},(0,B.getPatientPhone)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"Address:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientHomeAddress)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"ID:"),c.default.createElement("div",{className:"col-xs-8 col-sm-3 col-lg-3 text-left"},this.state.patient.id||(this.state.loading?"loading...":"Unknown")),c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},"MRN:"),c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},(0,B.getPatientMRN)(this.state.patient)||(this.state.loading?"loading...":"Unknown")),this.state.patient.deceasedBoolean||this.state.patient.deceasedDateTime?c.default.createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 text-right text-muted"},c.default.createElement("span",{className:"deceased-label"},"Deceased:")):null,this.state.patient.deceasedBoolean||this.state.patient.deceasedDateTime?c.default.createElement("div",{className:"col-xs-8 col-sm-5 col-lg-3 text-left"},this.state.patient.deceasedDateTime?c.default.createElement("span",null,this.state.patient.deceasedDateTime):c.default.createElement("span",null,this.state.patient.deceasedBoolean?"Yes":"No")):null))))}},{key:"renderResources",value:function(e){var t=this.state.groups[e]||[];if(!t.length)return c.default.createElement("p",{className:"text-center text-muted"},'No items of type "',e,'" found');if(0===e.indexOf("Observation"))return c.default.createElement(k.default,{resources:t});switch(e){case"Immunization":return c.default.createElement(C.default,{resources:t});case"Condition":return c.default.createElement(A.default,{resources:t});case"Encounter":return c.default.createElement(D.default,{resources:t});case"CarePlan":return c.default.createElement(I.default,{resources:t});case"Patient":case"Practitioner":case"RelatedPerson":return c.default.createElement(U.default,{resources:t,title:e});default:return c.default.createElement(L.default,{resources:t,type:e,settings:this.props.settings})}}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.groups).sort(),n=this.state.selectedSubCat;return n&&this.state.groups[n]||(n=Object.keys(this.state.groups)[0]||""),c.default.createElement("div",{className:"page patient-detail-page"},c.default.createElement("nav",{className:"navbar bg-primary navbar-fixed-top"},c.default.createElement("div",{className:"container-fluid"},c.default.createElement("div",{className:"row navigator"},c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-3 col-lg-2"},c.default.createElement(x.Link,{to:"/patient/"+(this.state.index-1),className:"btn btn-primary btn-block",disabled:this.state.index<1},c.default.createElement("i",{className:"fa fa-chevron-left"}),c.default.createElement("b",null,"Prev",c.default.createElement("span",{className:"hidden-xs"},"ious Patient")))),c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-6 col-lg-8 text-center"},c.default.createElement(x.Link,{className:"btn btn-block text-center",to:"/"},c.default.createElement("span",{className:"hidden-xs"},"Browse Patients"),c.default.createElement("span",{className:"visible-xs"},"Browse"))),c.default.createElement("div",{className:"col-xs-4 col-sm-4 col-md-3 col-lg-2 text-right"},c.default.createElement(x.Link,{to:"/patient/"+(this.state.index+1),className:"btn btn-primary btn-block",disabled:!this.state.hasNext},c.default.createElement("b",null,"Next",c.default.createElement("span",{className:"hidden-xs"}," Patient")),c.default.createElement("i",{className:"fa fa-chevron-right"})))))),c.default.createElement("div",{className:"container"},this.renderPatient(),t.length?c.default.createElement("div",{className:"row patient-details"},c.default.createElement("br",null),c.default.createElement("div",{className:"col-xs-12 col-sm-3"},c.default.createElement("ul",{className:"list-group"},t.map(function(t,r){return c.default.createElement("a",{href:"#",key:r,className:"list-group-item"+(t===n?" active":""),onClick:function(n){n.preventDefault(),e.setState({selectedSubCat:t})}},c.default.createElement("b",{className:"badge pull-right"},e.state.groups[t].length),c.default.createElement("b",null,t))}))),c.default.createElement("div",{className:"col-xs-12 col-sm-9"},this.renderResources(n))):this.state.loading?null:c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 text-muted text-center"},"No additional details for this patient"))),window.opener||window.parent&&window.parent!==window?c.default.createElement("nav",{className:"navbar navbar-default navbar-fixed-bottom"},c.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12",style:{paddingTop:8}},c.default.createElement(E.default,null))))):null)}}]),t}(c.default.Component);G.propTypes={match:f.default.object,settings:f.default.object,selection:f.default.object,query:f.default.object},t.default=(0,y.connect)(function(e){return e})(G)},320:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f=n(61),d=n(103),h=r(d),m=n(0),g=r(m),y=n(7),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=(0,y.getPatientAge)(this.props.patient),n=(0,y.getPatientName)(this.props);return this.props.query.params.name&&(n=(0,y.renderSearchHighlight)(n,this.props.query.params.name)),u.default.createElement(f.Link,{to:"/patient/"+this.props.index,className:"patient"+(this.props.selected?" selected":"")},u.default.createElement("div",{className:"patient-select-zone",onClick:function(t){t.stopPropagation(),t.preventDefault(),e.props.onSelectionChange(e.props.patient)}},u.default.createElement("i",{className:this.props.selected?"fa fa-check-square-o":"fa fa-square-o"})),u.default.createElement(h.default,{patient:this.props.patient,base:this.props.settings.server.url}),u.default.createElement("div",{className:"patient-info"},u.default.createElement("b",null,n," ",this.props.patient.deceasedBoolean||this.props.patient.deceasedDateTime?u.default.createElement("span",{className:"deceased-label"},"Deceased"):null),u.default.createElement("small",null,u.default.createElement("b",null,t)," old ",this.renderGender()),u.default.createElement("footer",{className:"small"},u.default.createElement("span",null,"DOB: ",this.props.patient.birthDate||"Unknown",this.props.patient.deceasedDateTime?" / DOD: "+(0,g.default)(this.props.patient.deceasedDateTime).format("YYYY-MM-DD"):null),u.default.createElement("span",null,"ID: ",this.props.patient.id||"Unknown"),u.default.createElement("span",null,"MRN: ",(0,y.getPatientMRN)(this.props.patient)||"Unknown"))),u.default.createElement("i",{className:"fa fa-angle-right"}))}},{key:"renderGender",value:function(){var e=this.props.patient.gender;return e?u.default.createElement("span",{className:e},e):null}}]),t}(u.default.Component);b.propTypes={patient:p.default.object,query:p.default.object,settings:p.default.object,selected:p.default.bool,onSelectionChange:p.default.func,index:p.default.number},b.defaultProps={onSelectionChange:function(){return 1}},t.default=b},321:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PatientList=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),p=n(3),f=r(p),d=n(320),h=r(d),m=n(47),g=n(48),y=n(22),b=n(46),v=r(b),x=n(20),w=n(317),E=r(w),_=n(318),O=r(_),S=n(101),j=r(S),P=n(99),k=r(P);n(539);var N=t.PatientList=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"page"},c.default.createElement(O.default,{query:this.props.query,settings:this.props.settings,location:this.props.location,urlParams:this.props.urlParams}),c.default.createElement("div",{className:"patient-search-results"},this.renderContents()),c.default.createElement(E.default,{query:this.props.query,bundle:this.props.query.bundle,dispatch:this.props.dispatch,selection:this.props.selection,canShowSelected:!0}))}},{key:"renderContents",value:function(){return this.props.query.error?c.default.createElement(j.default,{error:this.props.query.error}):!this.props.query.bundle||this.props.query.loading?c.default.createElement("div",{className:"patient-search-loading"},c.default.createElement("i",{className:"fa fa-spinner spin"})," Loading. Please wait..."):this.props.query.bundle.entry&&this.props.query.bundle.entry.length?this.renderPatientItems():c.default.createElement(k.default,null,"No patients found to match this search criteria")}},{key:"renderPatientItems",value:function(){var e=this,t=function(t){var n=(t.resource.id||"").toLowerCase(),r=Object.keys(e.props.selection).find(function(e){return e.toLowerCase()==n});return r&&!1!==e.props.selection[r]},n=this.props.query.offset||0,r=this.props.query.bundle.entry||[];return this.props.settings.renderSelectedOnly&&(r=r.filter(t)),r.map(function(r,a){return c.default.createElement(h.default,l({},r.resource,{patient:r.resource,key:r.resource.id,index:n+a,selected:t(r),onSelectionChange:function(t){e.props.settings.renderSelectedOnly&&1===Object.keys(e.props.selection).filter(function(t){return!!e.props.selection[t]}).length?(v.default.dispatch((0,m.setAll)({})),v.default.dispatch((0,g.showSelectedOnly)(!1)),v.default.dispatch((0,y.setParam)({name:"_id",value:void 0})),v.default.dispatch((0,y.fetch)())):v.default.dispatch((0,m.toggle)(t))},query:e.props.query,settings:e.props.settings}))})}}]),t}(c.default.Component);N.propTypes={query:f.default.object,selection:f.default.object,location:f.default.object,settings:f.default.object,urlParams:f.default.object,dispatch:f.default.func},t.default=(0,x.connect)(function(e){return e})(N)},322:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c);n(540);var f=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"change",value:function(e,t){if("function"==typeof this.props.onChange){var n=this.parseSort(this.props.sort);t?n[e]=t:n.hasOwnProperty(e)&&delete n[e],this.props.onChange(this.compileSort(n))}}},{key:"parseSort",value:function(e){var t={};return String(e||"").split(",").filter(Boolean).forEach(function(e){var n=e.replace(/^\-/,"");t[n]=0===e.indexOf("-")?"desc":"asc"}),t}},{key:"compileSort",value:function(e){return Object.keys(e).map(function(t){return"desc"==e[t]?"-"+t:t}).join(",")}},{key:"render",value:function(){var e=this,t=this.parseSort(this.props.sort);return u.default.createElement("div",{className:"sort-widget small"},u.default.createElement("span",{className:"pull-left"},"Sort",u.default.createElement("span",{className:"hidden-xs"}," by"),":"),u.default.createElement("ul",{className:"nav nav-pills"},this.props.options.map(function(n,r){return u.default.createElement("li",{key:r,role:"presentation",className:n.value in t?"active":null},u.default.createElement("a",{href:"#",onClick:function(t){switch(t.preventDefault(),e.parseSort(e.props.sort)[n.value]){case"asc":return e.change(n.value,"desc");case"desc":return e.change(n.value,"");default:return e.change(n.value,"asc")}}},n.label||n.name,"asc"==t[n.value]?u.default.createElement("span",{className:"sort"},u.default.createElement("span",{className:"hidden-xs"}," Asc")," ",u.default.createElement("i",{className:"fa fa-sort-amount-asc"})):"desc"==t[n.value]?u.default.createElement("span",{className:"sort"},u.default.createElement("span",{className:"hidden-xs"}," Desc")," ",u.default.createElement("i",{className:"fa fa-sort-amount-desc"})):null))})))}}]),t}(u.default.Component);f.propTypes={sort:p.default.string,options:p.default.arrayOf(p.default.shape({name:p.default.string,value:p.default.string})),onChange:p.default.func},f.defaultProps={sort:"name,-birthdate",options:[{label:u.default.createElement("span",null,u.default.createElement("span",{className:"hidden-xs"},"Patient "),"ID"),name:"Patient ID",value:"_id"},{name:"Name",value:"given"},{name:"Gender",value:"gender"},{name:"DOB",value:"birthdate"}]},t.default=f},323:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(3),h=r(d),m=n(19),g=r(m),y=n(7);n(541);var b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return l.state={selected:[],open:!1,selectedIndex:-1,search:""},l.stateFromProps(l.state,l.props),l.addTag=l.addTag.bind(l),l.removeTag=l.removeTag.bind(l),l.onFocus=l.onFocus.bind(l),l.onBlur=l.onBlur.bind(l),l.onKeyDown=l.onKeyDown.bind(l),l.onInput=l.onInput.bind(l),l}return l(t,e),c(t,[{key:"stateFromProps",value:function(e,t){var n=this,r=!1;return t.search&&(e.search=t.search,r=!0),t.selected&&(e.selected=[].concat(a(t.selected.map(function(e){return n.props.tags.find(function(t){return t.key===e})||{key:e,label:e,custom:!0,data:{description:e,codes:{"":[e]}}}}))),r=!0),r}},{key:"componentWillReceiveProps",value:function(e){var t={};this.stateFromProps(t,e)&&this.setState(t)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.refs.menu;if(t){var n=t.clientHeight,r=t.scrollTop,a=parseInt((0,g.default)(t).css("paddingTop"),10),o=parseInt((0,g.default)(t).css("paddingBottom"),10),i=(0,g.default)(".selected",this.refs.menu);if(i.length){var l=i[0].offsetTop,s=i[0].offsetHeight;l<r?requestAnimationFrame(function(){return e.refs.menu.scrollTop=l-a}):l+s-r>n&&requestAnimationFrame(function(){return e.refs.menu.scrollTop=l+s+o-n})}}}},{key:"onFocus",value:function(){this.setState({open:!0})}},{key:"onBlur",value:function(){this.setState({open:!1})}},{key:"onInput",value:function(e){var t=this.filterTags(e.target.value);this.setState({search:e.target.value,open:!0,selectedIndex:t.length&&-1==this.state.selectedIndex?0:this.state.selectedIndex})}},{key:"onKeyDown",value:function(e){var t=this,n=this.filterTags(this.state.search);switch(e.keyCode){case 27:this.setState({open:!1});break;case 13:e.preventDefault(),n.length<2&&this.setState({open:!1});var r=this.state.selectedIndex;r===n.length-1?this.setState({selectedIndex:r-1},function(){t.addTag(n[r])}):this.addTag(n[r]);break;case 40:e.preventDefault();var a=n.length-1;this.setState({open:!0,selectedIndex:Math.min(this.state.selectedIndex+1,a)});break;case 38:e.preventDefault(),this.state.selectedIndex>0?this.setState({selectedIndex:this.state.selectedIndex-1}):this.state.open&&this.setState({open:!1,selectedIndex:-1})}}},{key:"addTag",value:function(e){var t=this;e&&e.key&&(this.state.selected.find(function(t){return t.key===e.key})||this.setState(u({},this.state,{selected:[].concat(a(this.state.selected),[e]),search:"",open:!1,selectedIndex:-1}),function(){return t.props.onChange(t.state.selected)}))}},{key:"removeTag",value:function(e){var t=this;if(e){var n=this.state.selected.findIndex(function(t){return t.key===e});n>-1&&(this.state.selected.splice(n,1),this.setState({},function(){return t.props.onChange(t.state.selected)}))}}},{key:"filterTags",value:function(e){var t=this,n=this.props.tags.filter(function(n){if(t.state.selected.find(function(e){return n.key===e.key}))return!1;if(e){if(n.label.toLowerCase().indexOf(e.toLowerCase())>-1)return!0;if(n.data&&n.data.codes&&"object"==s(n.data.codes))for(var r in n.data.codes)return n.data.codes[r].some(function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1});return!1}return!0}).sort(function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}).map(function(e){return u({},e)});return this.state.search&&n.unshift({key:this.state.search,label:this.state.search,custom:!0,data:{description:this.state.search,codes:{"":[this.state.search]}}}),n}},{key:"renderTagCode",value:function(e){if(!e||!e.data||!e.data.codes)return null;var t="",n=e.data.codes;if(n["SNOMED-CT"])t=n["SNOMED-CT"].join("|");else for(var r in n){t=n[r].join(",")+" ("+r+")";break}return this.state.search&&(t=(0,y.renderSearchHighlight)(t,this.state.search)),t?f.default.createElement("small",{key:e.key,className:"text-muted code"},t,":"):null}},{key:"renderTag",value:function(e,t){var n=this;return f.default.createElement("div",{className:"menu-item"+(this.state.selectedIndex===t?" selected":"")+(e.custom?" custom text-primary":""),key:e.key,onMouseDown:function(t){t.preventDefault(),n.addTag(e)},title:e.label},e.custom?f.default.createElement("span",null,"Search for ",f.default.createElement("b",{className:"tag custom"},this.state.search),this.props.label?" "+this.props.label:""):null,e.custom?null:this.renderTagCode(e),e.custom?null:(0,y.renderSearchHighlight)(e.label,this.state.search))}},{key:"render",value:function(){var e=this,t=this.filterTags(this.state.search).map(this.renderTag,this),n=0===t.length,r=this.state.selected.map(function(t){return f.default.createElement("div",{className:"tag"+(t.custom?" custom":""),key:t.key},t.label,f.default.createElement("i",{className:"tag-remove fa fa-times-circle",title:"Remove",onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),e.removeTag(t.key)}}))}),a="Type to search";return this.props.label&&(a+=" for "+this.props.label+"s"),a+=" ...",f.default.createElement("div",{className:"tag-selector"+(this.state.open?" open":"")},r.length?f.default.createElement("div",{className:"tags"},r):null,f.default.createElement("input",{className:"input form-control input-sm",placeholder:a,onFocus:this.onFocus,onClick:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onInput:this.onInput,onChange:function(){return 1},value:this.state.search}),f.default.createElement("i",{className:"fa fa-caret-down"}),n&&!this.state.search?null:f.default.createElement("div",{className:"menu dropdown-menu",ref:"menu"},t))}}]),t}(f.default.Component);b.propTypes={tags:h.default.arrayOf(h.default.object),selected:h.default.arrayOf(h.default.string),onChange:h.default.func,search:h.default.string,label:h.default.string},b.defaultProps={onChange:function(){return 1},tags:[],selected:[],search:""},t.default=b},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={server:{type:"STU-3",url:"https://r3.smarthealthit.org",conditions:{},tags:[]},hideTagSelector:!1,patientsPerPage:25,timeout:2e4,renderSelectedOnly:!1,fhirViewer:{enabled:!0,url:"http://docs.smarthealthit.org/fhir-viewer/index.html",param:"url"},outputMode:"id-list",submitStrategy:"manual"}},325:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=r(s),c=n(104),p=n(7),f=n(19),d=r(f),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.__cache__={},this.__scheduled__={},this.conditions=i({},t.conditions||{}),this.minAge=null,this.maxAge=null,this.gender=t.gender||null,this.limit=t.limit||null,this.offset=null,this.params={},this.queryType=t.queryType||"default",this.queryString=t.queryString||"",this.sort=t.sort||"",this.tags=String(t.tags||"").split(/\s*,\s*/).filter(Boolean)}return l(e,[{key:"schedule",value:function(e){this.__scheduled__=i({},this.__scheduled__,e)}},{key:"hasParam",value:function(e){return this.params.hasOwnProperty(e)}},{key:"setParam",value:function(e,t){var n=this.hasParam(e);return void 0===t?n&&delete this.params[e]:this.params[e]=t,this.offset=null,this.cacheId=null,this}},{key:"setQueryType",value:function(e){return this.queryType="advanced"==e?"advanced":"default",this}},{key:"setQueryString",value:function(e){return this.queryString=String(e||""),this}},{key:"addCondition",value:function(e,t){return this.conditions[e]=t,this.__cache__.patientIDs=null,this}},{key:"removeCondition",value:function(e){return this.conditions.hasOwnProperty(e)&&(delete this.conditions[e],this.__cache__.patientIDs=null),this}},{key:"setConditions",value:function(e){return this.conditions=i({},e),this.schedule({offset:null,cacheId:null}),this.__cache__.patientIDs=null,this}},{key:"addTag",value:function(e){return-1==this.tags.findIndex(e)&&this.tags.push(e),this}},{key:"removeTag",value:function(e){var t=this.tags.findIndex(e);return t>-1&&this.tags.splice(t,1),this}},{key:"setTags",value:function(e){return this.tags=[].concat(a(e)),this.schedule({offset:null,cacheId:null}),this}},{key:"setMinAge",value:function(e){return this.minAge=e,this.schedule({offset:null,cacheId:null}),this}},{key:"setMaxAge",value:function(e){return this.maxAge=e,this.schedule({offset:null,cacheId:null}),this}},{key:"setAgeGroup",value:function(e){switch(this.ageGroup=e,this.schedule({offset:null,cacheId:null}),e){case"infant":this.setMinAge(null),this.setMaxAge({value:1,units:"years"});break;case"child":this.setMinAge({value:1,units:"years"}),this.setMaxAge({value:18,units:"years"});break;case"adult":this.setMinAge({value:18,units:"years"}),this.setMaxAge({value:65,units:"years"});break;case"elderly":this.setMinAge({value:65,units:"years"}),this.setMaxAge(null);break;default:this.setMinAge(null),this.setMaxAge(null)}return this}},{key:"setGender",value:function(e){return e!==this.gender&&(this.gender=e,this.schedule({offset:null,cacheId:null})),this}},{key:"setLimit",value:function(e){return this.limit=(0,p.intVal)(e),this.limit<1&&(this.limit=null),this}},{key:"setOffset",value:function(e,t){return this.offset=(0,p.intVal)(t),this.cacheId=e,this.offset<1&&(this.offset=null,this.cacheId=null),this}},{key:"setSort",value:function(e){return this.sort=e,this.offset=null,this.cacheId=null,this}},{key:"clone",value:function(){var t=new e;return t.conditions=i({},this.conditions),t.params=i({},this.params),t.tags=[].concat(a(this.tags)),t.setSort(this.sort).setAgeGroup(this.ageGroup).setMinAge(this.minAge).setMaxAge(this.maxAge).setGender(this.gender).setLimit(this.limit).setOffset(this.cacheId,this.offset).setQueryType(this.queryType).setQueryString(this.queryString),t}},{key:"reset",value:function(){return this.conditions={},this.minAge=null,this.maxAge=null,this.gender=null,this.limit=null,this.offset=null,this.cacheId=null,this.ageGroup=null,this.params={},this.queryString="",this.queryType="default",this.sort="",this.tags=[],this}},{key:"getState",value:function(){return{conditions:this.conditions,minAge:this.minAge,maxAge:this.maxAge,gender:this.gender,limit:this.limit,offset:this.offset,cacheId:this.cacheId,ageGroup:this.ageGroup,params:i({},this.params),queryString:this.queryString,queryType:this.queryType,sort:this.sort,tags:[].concat(a(this.tags))}}},{key:"compile",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=[];if(["minAge","maxAge","gender","limit","offset","queryType","queryString","sort"].forEach(function(t){e.__scheduled__.hasOwnProperty(t)&&(e[t]=e.__scheduled__[t],delete e.__scheduled__[t])}),this.tags.length&&!this.params._id&&n.push({name:"_tag",value:this.tags.join(",")}),"advanced"==this.queryType){var r=this.queryString.trim();if(r){var a=(0,p.parseQueryString)(r);for(var o in a)n.push({name:o,value:a[o]})}}else if(Object.keys(this.params).forEach(function(t){String(e.params[t]).trim()&&n.push({name:t,value:e.params[t]})}),this.sort&&String(this.sort).split(",").forEach(function(e){0===e.indexOf("-")?n.push({name:"_sort:desc",value:e.substring(1)}):n.push({name:"_sort:asc",value:e})}),!this.params._id){if(this.minAge){var i=(0,u.default)().subtract(this.minAge.value,this.minAge.units);n.push({name:"birthdate",value:"le"+i.format("YYYY-MM-DD")})}if(this.maxAge){var l=(0,u.default)().subtract(this.maxAge.value,this.maxAge.units);n.push({name:"birthdate",value:"ge"+l.format("YYYY-MM-DD")})}if(this.maxAge||this.minAge){var s=n.find(function(e){return"deceased"===e.name});s?s.value=!1:n.push({name:"deceased",value:!1})}this.gender&&n.push({name:"gender",value:this.gender})}return this.limit&&n.push({name:"_count",value:this.limit}),this.offset&&this.cacheId&&n.push({name:"_getpages",value:this.cacheId},{name:"_getpagesoffset",value:this.offset}),n.map(function(e){return t?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e.name+"="+e.value}).join("&")}},{key:"hasConditions",value:function(){for(var e in this.conditions)if(this.conditions.hasOwnProperty(e))return!0;return!1}},{key:"compileConditions",value:function(){var e=this,t=[];for(var n in this.conditions)!function(n){var r=e.conditions[n],a=[];for(var o in r.codes)!function(e){var t=(c.CODE_SYSTEMS[e]||{}).url||"http://snomed.info/sct";r.codes[e].forEach(function(e){a.push(t+"|"+e)})}(o);a.length&&t.push(a.join(","))}(n);return t.length?"code="+encodeURIComponent(t.join(",")):""}},{key:"getConditionKeys",value:function(){var e=this,t=[];for(var n in this.conditions)!function(n){var r=e.conditions[n],a=[];for(var o in r.codes)!function(e){var t=(c.CODE_SYSTEMS[e]||{}).url||"http://snomed.info/sct";r.codes[e].forEach(function(e){a.push(t+"|"+e)})}(o);a.length&&t.push(a.join(","))}(n);return t}},{key:"getPatientIDs",value:function(e){var t=this;if(this.__cache__.patientIDs)return Promise.resolve(this.__cache__.patientIDs);var n=this.compileConditions();if(!n)return Promise.resolve([]);var r=this.getConditionKeys(),a={},o=function t(n){if(n.entry){n.entry.forEach(function(t){var n="DSTU-2"==e.type?t.resource.patient.reference.split("/").pop():t.resource.subject.reference.split("/").pop();a[n]||(a[n]=[]),a[n].push(((0,p.getPath)(t,"resource.code.coding.0.system")||"http://snomed.info/sct")+"|"+(0,p.getPath)(t,"resource.code.coding.0.code"))});var o=(n.link||[]).find(function(e){return"next"==e.relation});if(o)return(0,p.request)({url:o.url}).then(t)}return a=Object.keys(a).filter(function(e){return r.every(function(t){return a[e].indexOf(t)>-1})}),Promise.resolve(a)},i=[n];return i.push("DSTU-2"==e.type?"_elements=patient,code":"_elements=subject,code"),i.push("_count=500"),this.tags.length&&i.push("_tag="+encodeURIComponent(this.tags.join(","))),(0,p.request)({url:e.url+"/Condition?"+i.join("&")}).then(o).then(function(e){return t.__cache__.patientIDs=e,e})}},{key:"fetch",value:function(e){var t=this,n=this.compile();"DSTU-2"==e.type&&(n=n.replace(/\bdeceased=(true|false)\b/gi,""));var r={url:this.offset&&this.cacheId?e.url:e.url+"/Patient/_search",method:this.offset&&this.cacheId?"GET":"POST",processData:!1,data:n,headers:{accept:"application/json+fhir","content-type":"application/x-www-form-urlencoded"}};return e.headers&&(r.headers=d.default.extend(!0,r.headers,e.headers)),this.getPatientIDs(e).then(function(e){if(e.length)r.data=[r.data,"_id="+encodeURIComponent(e.join(","))].filter(Boolean).join("&");else if(t.hasConditions())return Promise.reject("No patients found with the specified conditions!");return r}).then(p.request)}}]),e}();t.default=h},326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){return r({},o)};var a=n(7),o=(0,a.parseQueryString)(location.hash.replace(/^.*\?/,""))},327:function(e,t,n){!function(){"use strict";function t(e){return"string"==typeof e||e instanceof String}function r(e,n){if(Array.isArray(n)){for(var a=0;a<n.length;++a)if(r(e,n[a]))return!0;return!1}return t(n)?e===n:n instanceof RegExp?n.test(e):!!n}function a(e,n){var a,o=n.headers.origin,i=[];return e.origin&&"*"!==e.origin?t(e.origin)?(i.push([{key:"Access-Control-Allow-Origin",value:e.origin}]),i.push([{key:"Vary",value:"Origin"}])):(a=r(o,e.origin),i.push([{key:"Access-Control-Allow-Origin",value:!!a&&o}]),i.push([{key:"Vary",value:"Origin"}])):i.push([{key:"Access-Control-Allow-Origin",value:"*"}]),i}function o(e){var t=e.methods;return t.join&&(t=e.methods.join(",")),{key:"Access-Control-Allow-Methods",value:t}}function i(e){return!0===e.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function l(e,t){var n=e.allowedHeaders||e.headers,r=[];return n?n.join&&(n=n.join(",")):(n=t.headers["access-control-request-headers"],r.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),n&&n.length&&r.push([{key:"Access-Control-Allow-Headers",value:n}]),r}function s(e){var t=e.exposedHeaders;return t?(t.join&&(t=t.join(",")),t&&t.length?{key:"Access-Control-Expose-Headers",value:t}:null):null}function u(e){var t=("number"==typeof e.maxAge||e.maxAge)&&e.maxAge.toString();return t&&t.length?{key:"Access-Control-Max-Age",value:t}:null}function c(e,t){for(var n=0,r=e.length;n<r;n++){var a=e[n];a&&(Array.isArray(a)?c(a,t):"Vary"===a.key&&a.value?h(t,a.value):a.value&&t.setHeader(a.key,a.value))}}function p(e,t,n,r){var p=[];"OPTIONS"===(t.method&&t.method.toUpperCase&&t.method.toUpperCase())?(p.push(a(e,t)),p.push(i(e,t)),p.push(o(e,t)),p.push(l(e,t)),p.push(u(e,t)),p.push(s(e,t)),c(p,n),e.preflightContinue?r():(n.statusCode=e.optionsSuccessStatus,n.setHeader("Content-Length","0"),n.end())):(p.push(a(e,t)),p.push(i(e,t)),p.push(s(e,t)),c(p,n),r())}function f(e){var t=null;return t="function"==typeof e?e:function(t,n){n(null,e)},function(e,n,r){t(e,function(t,a){if(t)r(t);else{var o=d({},m,a),i=null;o.origin&&"function"==typeof o.origin?i=o.origin:o.origin&&(i=function(e,t){t(null,o.origin)}),i?i(e.headers.origin,function(t,a){t||!a?r(t):(o.origin=a,p(o,e,n,r))}):r()}})}}var d=n(373),h=n(545),m={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};e.exports=f}()},33:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.moment,n=e.format,r=void 0===n?"MM/DD/YYYY":n,o=a(e,["moment","format"]);return l.default.createElement("span",o,(0,p.default)(t).format(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),l=r(i),s=n(3),u=r(s),c=n(0),p=r(c);o.propTypes={format:u.default.string,moment:u.default.oneOfType([u.default.string,u.default.instanceOf(o),u.default.object]).isRequired}},330:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".age-widget-wrap {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  white-space: nowrap;\n  padding: 0;\n  position: relative;\n  font-size: 12px;\n}\n.age-widget-wrap > * {\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 1;\n  margin: 0;\n  height: 100%;\n  font-size: 13px;\n}\n.age-widget-wrap select {\n  border: 1px solid transparent;\n  border-radius: 4px;\n  height: 100%;\n}\n.age-widget-wrap.custom > select {\n  flex-grow: 0;\n  min-width: 0;\n  flex-basis: 180px;\n}\n.age-widget-wrap input {\n  height: 100%;\n  border: 1px solid transparent;\n}\n.age-widget {\n  display: flex;\n  flex-basis: 30%;\n  min-width: 0;\n  overflow: hidden;\n  align-items: center;\n  box-shadow: 2px 1px 2px -2px #BBB inset;\n}\n.age-widget:last-of-type {\n  border-radius: 0 3px 3px 0;\n}\n.age-widget span {\n  display: flex;\n  white-space: nowrap;\n  flex-basis: 7ex;\n  flex-shrink: 0;\n  flex-grow: 0;\n  margin: 0 1ex 0 0;\n  flex-direction: column;\n  align-content: flex-end;\n  background: rgba(0, 0, 0, 0.06);\n  box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 2px 0px rgba(0, 0, 0, 0.1);\n  line-height: 2.1em;\n  padding: 0 1ex;\n  text-align: right;\n  height: 100%;\n  font-weight: 500;\n}\n.age-widget input {\n  flex-shrink: 1;\n  flex-grow: 2;\n  flex-basis: 30px;\n  display: flex;\n  margin: 0;\n  background: transparent;\n  min-width: 32px;\n  border-right: 1px dotted rgba(0, 0, 0, 0.2);\n}\n.age-widget select {\n  display: flex;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: 6em;\n  min-width: 6em;\n}\n.age-widget:hover {\n  box-shadow: 0 0 0 1px #369;\n  background: #ebf0f5;\n}\n.age-widget.invalid {\n  background: rgba(255, 0, 0, 0.1);\n  background: rgba(255, 0, 0, 0.03) repeating-linear-gradient(-45deg, rgba(255, 50, 0, 0), rgba(255, 50, 0, 0) 2.5px, rgba(255, 0, 0, 0.2) 3px, rgba(255, 50, 0, 0) 3.5px);\n  background-size: 40px 40px;\n}\n@media (max-width: 600px) {\n  .age-widget-wrap.custom {\n    flex-wrap: wrap;\n    white-space: normal;\n    height: auto;\n  }\n  .age-widget-wrap.custom > select {\n    flex-basis: 600px;\n    flex-grow: 1;\n    flex-shrink: 1;\n    width: 100%;\n    line-height: 2.1em;\n    height: 2.1em;\n  }\n  .age-widget-wrap.custom .age-widget {\n    flex-basis: 50%;\n    flex-grow: 1;\n    min-width: none;\n    box-shadow: 0px 3px 0px -2px #DDD inset;\n  }\n  .age-widget-wrap.custom .age-widget:hover {\n    box-shadow: 0 0 0 1px #369;\n    background: #ebf0f5;\n  }\n  .age-widget-wrap.custom .age-widget:last-of-type {\n    border-radius: 0 0 3px 0;\n  }\n  .age-widget-wrap.custom .age-widget ~ .age-widget span {\n    box-shadow: 1px 0 0 0 rgba(0, 0, 0, 0.1), 1px 0 0 0 rgba(0, 0, 0, 0.1) inset, 1px 0 2px 0px rgba(0, 0, 0, 0.1);\n  }\n}\n",""])},331:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,"* {\n  box-sizing: border-box;\n}\nhtml {\n  height: 100%;\n  display: block;\n}\nbody {\n  background: linear-gradient(#F6F6F6, #FFF);\n  color: #444;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  height: 100%;\n  font-family: \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 14px;\n  line-height: normal;\n}\na {\n  text-decoration: none;\n  color: #369;\n}\na:disabled,\na[disabled] {\n  pointer-events: none;\n  opacity: 0.4 !important;\n}\nhr {\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.9);\n}\n*:focus {\n  outline: none !important;\n}\n.tab-content {\n  background: linear-gradient(#FFF, transparent);\n  border: 1px solid #DDD;\n  border-top: 0;\n  padding: 15px 15px 0;\n  border-radius: 0 0 5px 5px;\n}\n#overlay {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(150, 150, 150, 0.1);\n  z-index: 1000000000;\n}\n#main {\n  height: 100%;\n}\n.app {\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  height: 100%;\n}\n.page {\n  display: flex;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.page {\n  display: flex;\n}\n.patient-search-loading {\n  display: flex;\n  flex-grow: 1;\n  align-content: center;\n  align-items: center;\n  align-self: center;\n}\n.patient-search-loading .fa {\n  margin: 1ex;\n}\n.spin {\n  animation: spin 2s linear infinite;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359deg);\n  }\n}\n.page {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  height: 100%;\n}\n.pre {\n  white-space: pre;\n  font-family: monospace;\n  font-size: 12px;\n  display: block;\n}\n.search-match {\n  background: #FFCF39;\n  box-shadow: 0 0 1px rgba(255, 255, 255, 0.8) inset, 0 0 1px rgba(0, 0, 0, 0.99) !important;\n  border-radius: 2px;\n  text-shadow: 0 0 1px #FFF !important;\n  color: #000 !important;\n}\n.small.pull-left,\n.small.pull-right,\nsmall.pull-left,\nsmall.pull-right {\n  margin-top: 0.5ex;\n}\nlabel[disabled] {\n  color: rgba(0, 0, 0, 0.4);\n  cursor: not-allowed;\n  user-select: none;\n}\n.deceased-label {\n  vertical-align: baseline;\n  color: #e45f00;\n  font-size: 11px;\n  padding: 0px 4px 1px;\n  border-radius: 3px;\n  border: 1px solid #ff6a00;\n  box-shadow: 0 1px 4px 0px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(255, 255, 255, 0.31) inset;\n}\nselect,\nselect.form-control {\n  padding: 0 10px;\n  line-height: 30px;\n  font: inherit;\n  background-color: transparent;\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAxMDAwIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTSA5Ni4wMCw5Ni4wMGwtOTYuMDAsOTYuMDBsIDI1Ni4wMCwyNTYuMDBsIDI1Ni4wMC0yNTYuMDBsLTk2LjAwLTk2LjAwTCAyNTYuMDAsMjU2LjAwTCA5Ni4wMCw5Ni4wMHoiID48L3BhdGg+PC9zdmc+');\n  background-position: 100% 50%;\n  background-repeat: no-repeat;\n  background-size: 15px;\n  position: relative;\n  padding-right: 20px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  -ms-appearance: none;\n}\nselect::-ms-expand,\nselect.form-control::-ms-expand {\n  display: none;\n}\n",""])},332:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".dialog-buttons button {\n  min-width: 10em;\n  margin: 0 0 0 1em;\n}\n.dialog-buttons label {\n  margin: 2px 0;\n  display: flex;\n  align-items: center;\n  min-height: 30px;\n}\n.dialog-buttons .btn-group {\n  display: inline-flex;\n  flex: 0 1 18em;\n  line-height: 1;\n  flex-direction: row;\n  box-shadow: 0 1px 1px #FFF;\n  margin: 0 6px;\n}\n.dialog-buttons .btn-group > .btn {\n  display: flex;\n  flex: 1 1 120px;\n  align-items: center;\n  align-content: center;\n  align-self: center;\n  flex-direction: column;\n  min-width: 4em;\n  margin: 0;\n  border: 1px solid #BBB;\n  padding: 4px 2ex;\n  background: linear-gradient(#F9F9F9, #E9E9E9);\n  font-weight: normal;\n  color: #666;\n  text-shadow: 0 1px 0 #FFF;\n  box-shadow: 0 1px 1px #FFF inset;\n  overflow: hidden;\n}\n.dialog-buttons .btn-group > .btn:hover {\n  background: linear-gradient(#FFF, #EEE);\n}\n.dialog-buttons .btn-group > .btn:active,\n.dialog-buttons .btn-group > .btn.active {\n  background: linear-gradient(#CCC, #DDD);\n  box-shadow: 0 1px 1px #BBB inset;\n  border-color: #999 #AAA #BBB;\n}\n.dialog-buttons .btn-group > .btn + .btn {\n  margin-left: -1px;\n}\n.dialog-buttons .btn-group > .btn:first-child {\n  border-radius: 4px 0 0 4px;\n}\n.dialog-buttons .btn-group > .btn:last-child {\n  border-radius: 0 4px 4px 0;\n}\n.dialog-buttons :disabled .btn-group,\n.dialog-buttons [disabled] .btn-group,\n.dialog-buttons .disabled .btn-group {\n  opacity: 0.5;\n  pointer-events: none;\n}\n",""])},333:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".app-footer {\n  position: relative;\n  z-index: 3;\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.25);\n  text-shadow: 0 1px 0 #FFF;\n  background: #F0F0F0;\n  white-space: nowrap;\n}\n.app-footer .row {\n  padding: 4px 0;\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset;\n}\n.app-footer .row + .row {\n  box-shadow: 0 -1px 0 0 rgba(0, 0, 0, 0.1) inset, 0 1px 0 0 rgba(255, 255, 255, 0.9) inset;\n}\n.app-footer .row:first-child .col-xs-6 {\n  padding: 6px 0px;\n}\n.app-footer a {\n  display: block;\n  padding: 5px 0px;\n  text-align: center;\n  border-radius: 4px;\n  border: 1px solid transparent;\n}\n.app-footer a:hover {\n  background: rgba(51, 122, 183, 0.15);\n  border: 1px solid rgba(51, 122, 183, 0.29);\n}\n",""])},334:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,'.app-header {\n  color: #1f3d5c;\n  padding: 5px 0 0;\n  background: linear-gradient(#DFDFDF, #EEE 5px, #e2e2e2);\n  position: relative;\n  z-index: 3;\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 5px 0 rgba(0, 0, 0, 0.5);\n  text-shadow: 0 1px 0 #FFF;\n  display: flex;\n  flex-shrink: 0;\n  flex-direction: column;\n}\n.app-header .nav.nav-tabs {\n  padding-left: 5px;\n}\n.app-header .nav.nav-tabs a {\n  padding: 5px 10px;\n}\n.app-header .tab-content {\n  background: linear-gradient(#FFF, #F6F6F6);\n  border: 0;\n  border-bottom: 1px solid #BBB;\n  padding: 5px 5px 0;\n  border-radius: 0;\n  font-size: small;\n  box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.1);\n}\n.app-header .badge {\n  text-shadow: 0 0 1px #FFF;\n  background: rgba(0, 0, 0, 0.08);\n  color: #444;\n  font-weight: 400;\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.2) inset;\n}\n.app-header .advanced-label {\n  margin: 7px 6px 0 0;\n}\n.app-header .advanced-label input[type="checkbox"] {\n  margin: 0;\n  vertical-align: middle;\n}\n.app-header .form-group {\n  margin-bottom: 5px;\n}\n.app-header label,\n.app-header .alert {\n  margin-bottom: 3px;\n}\n.app-header .alert {\n  padding: 5px 10px;\n}\n.app-header .btn-submit {\n  margin: 4px 5px 0 auto;\n  padding: 3px 8px;\n  box-shadow: -13px 3px 0px -6px #e3e3e3, 13px 3px 0px -6px #e3e3e3, 0px 1px 0px 2px #e3e3e3, 0 2px 0 2px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.4), 0px 1px 1px -1px #FFF inset, 0px -17px 0px -5px rgba(0, 0, 0, 0.05) inset;\n  border-radius: 30px;\n  text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25), 0 0 1px rgba(0, 0, 0, 0.5);\n  border-color: rgba(0, 0, 0, 0.5);\n  position: relative;\n  z-index: 100000000;\n  min-width: 10%;\n}\n',""])},335:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".loader {\n  background: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  border-radius: inherit;\n}\n.loader div {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  font-size: 18px;\n  transform: translate(-50%, -50%);\n  background: #FFF;\n  border-radius: 5px;\n  padding: 1ex 2em;\n  box-shadow: 0 0 1px 0px rgba(0, 0, 0, 0.5), 0 0 15px 1px rgba(0, 0, 0, 0.15);\n}\n",""])},336:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,'.patient-detail-page {\n  overflow: auto;\n  padding: 65px 0 50px;\n  display: block;\n  -webkit-overflow-scrolling: touch;\n}\n.patient-detail-page > .container {\n  width: 100%;\n}\n.patient-detail-page .navigator {\n  color: #FFF;\n}\n.patient-detail-page .navigator a {\n  white-space: nowrap;\n  padding: 8px 15px;\n  margin: 5px 0;\n  color: #FFF;\n}\n.patient-detail-page .navigator a:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.patient-detail-page .navigator .fa {\n  margin: 0 5px;\n}\n.patient-detail-page .embed-responsive {\n  padding-bottom: 100%;\n}\n.patient-detail-page .page-header {\n  margin: 0;\n  padding-bottom: 1.5ex;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.patient-detail-page .patient {\n  background: transparent;\n  padding: 0;\n  border: 0;\n  box-shadow: none;\n  position: relative;\n}\n.patient-detail-page .patient .text-left {\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.1);\n}\n.patient-detail-page .patient-row {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n  margin-bottom: 5px;\n  padding: 5px;\n}\n.patient-detail-page .patient-row:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.patient-detail-page .patient-row ~ .row > div {\n  padding: 3px 5px;\n}\n.patient-detail-page .patient-row h3 {\n  margin: 0;\n  line-height: 1.45em;\n}\n.patient-detail-page .patient-row .label {\n  margin: 8px 0 0 12px;\n  font-size: 13px;\n}\n.patient-detail-page .patient-row .btn {\n  min-width: 7em;\n  margin: 2px;\n}\n.patient-detail-page .patient-image-wrap {\n  margin-right: 1ex;\n}\n.patient-detail-page .patient-name {\n  font-size: 24px;\n}\n.patient-detail-page td,\n.patient-detail-page th {\n  font-size: 13px;\n  line-height: 16px;\n}\n.patient-detail-page td .text-muted,\n.patient-detail-page th .text-muted {\n  font-weight: 400;\n}\n.patient-detail-page td b,\n.patient-detail-page th b {\n  font-weight: 500;\n}\n.patient-detail-page td label,\n.patient-detail-page th label {\n  margin-bottom: 0;\n}\n.patient-detail-page td td,\n.patient-detail-page th td {\n  vertical-align: top;\n  font-size: 12px;\n  line-height: 16px;\n}\n.patient-detail-page td .label-cell,\n.patient-detail-page th .label-cell {\n  color: #888;\n  white-space: nowrap;\n  text-align: right;\n  font-weight: 400;\n  padding-right: 1ex;\n}\n.patient-detail-page td .label-cell:after,\n.patient-detail-page th .label-cell:after {\n  content: ": ";\n}\n.patient-detail-page td {\n  font-weight: 500;\n}\n.patient-detail-page th {\n  font-weight: 700;\n}\n.patient-detail-page thead th .glyphicon,\n.patient-detail-page thead th .fa {\n  text-shadow: 0 1px 2px #FFF, 0 0 0px #214b6f;\n  color: rgba(51, 122, 183, 0.3);\n}\n.patient-detail-page .patient-details {\n  white-space: normal;\n  word-wrap: break-word;\n}\n.patient-detail-page .patient-details .badge {\n  opacity: 0.75;\n  margin: 0 0 0 2px;\n}\n.patient-detail-page .patient-details table a {\n  white-space: normal;\n  word-break: break-all;\n  word-wrap: break-word;\n}\n.patient-detail-page .patient-details .panel-heading {\n  text-shadow: 0 1px 0 #FFF;\n}\n.patient-detail-page .list-group-item {\n  padding-top: 7px;\n  padding-bottom: 7px;\n}\n.patient-detail-page .group-header {\n  cursor: pointer;\n  background: linear-gradient(90deg, #ebf2f8, #f5f8fb);\n  text-indent: 0;\n}\n.patient-detail-page .group-header .glyphicon-triangle-bottom {\n  position: relative;\n  top: 2px;\n}\n.patient-detail-page .group-header ~ tr > td:first-child {\n  text-indent: 17px;\n}\n.patient-detail-page .group-clear + tr > td:first-child {\n  text-indent: 0;\n}\n.patient-detail-page .group-clear + tr > td:first-child:before {\n  content: "\\E250";\n  position: relative;\n  top: 1px;\n  display: inline-block;\n  font-family: \'Glyphicons Halflings\';\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  margin-right: 3px;\n  opacity: 0.3;\n}\n.patient-detail-page .table-responsive {\n  border: none !important;\n}\n',""])},337:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".patient-image-wrap {\n  height: 80px;\n  width: 80px;\n  background: #F6F6F6;\n  border-radius: 3px;\n  text-align: center;\n  position: relative;\n  box-shadow: 0 0 0.5px 0 rgba(0, 0, 0, 0.5) inset, 0 0 1px 1px #FFF;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n",""])},338:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".patient-search-results {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  background: #FFF;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.patient-search-results .male {\n  color: #369;\n}\n.patient-search-results .female {\n  color: #936;\n}\n.patient-search-results .patient {\n  position: relative;\n  padding: 1ex;\n  cursor: pointer;\n  flex-flow: 0;\n  flex-shrink: 0;\n  align-items: center;\n  display: flex;\n  transition: background 0.1s;\n  color: #444;\n  text-decoration: none;\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.85) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\n}\n.patient-search-results .patient:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.patient-search-results .patient .patient-select-zone {\n  display: inline-block;\n  vertical-align: middle;\n  height: 54px;\n  line-height: 54px;\n  width: 30px;\n  border-radius: 3px;\n  text-align: center;\n  color: #369;\n  min-width: 30px;\n}\n.patient-search-results .patient .patient-select-zone:hover {\n  background: rgba(51, 102, 153, 0.1);\n}\n.patient-search-results .patient .fa-angle-right {\n  opacity: 0.5;\n  font-size: 20px;\n  display: flex;\n  flex-basis: 1em;\n}\n.patient-search-results .patient .patient-image-wrap {\n  height: 54px;\n  width: 54px;\n  margin: 0 1ex;\n}\n.patient-search-results .patient .patient-info {\n  flex-grow: 1;\n}\n.patient-search-results .patient .patient-info > b {\n  font-size: 16px;\n  line-height: 1;\n  display: block;\n  margin-bottom: 2px;\n}\n.patient-search-results .patient .patient-info small {\n  opacity: 0.7;\n  display: block;\n}\n.patient-search-results .patient .patient-info footer {\n  opacity: 0.7;\n  display: flex;\n  flex-direction: row;\n  margin-top: 5px;\n}\n.patient-search-results .patient .patient-info footer > span {\n  display: flex;\n  flex-basis: 14em;\n  flex-grow: 1;\n}\n.patient-search-results .patient .patient-info footer > span + span {\n  margin-left: 2em;\n}\n.patient-search-results .patient.selected {\n  background: #369;\n  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;\n  text-shadow: 0 0 1px #000;\n}\n.patient-search-results .patient.selected,\n.patient-search-results .patient.selected * {\n  color: #FFF;\n}\n.patient-search-results .patient.selected .patient-image-wrap {\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 0.5px rgba(255, 255, 255, 0.5) inset;\n}\n.patient-search-results .patient.selected .patient-select-zone:hover {\n  background: rgba(255, 255, 255, 0.07);\n}\n.patient-search-results .patient.selected:hover {\n  background: #2f5e8e;\n}\n@media (max-width: 480px) {\n  .patient-search-results .patient .patient-info footer span + span {\n    display: none;\n  }\n}\n",""])},339:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,".sort-widget {\n  padding: 0 5px;\n  float: left;\n  width: 100%;\n}\n.sort-widget > span {\n  padding: 6px 1ex 0 0;\n  font-weight: bold;\n}\n.sort-widget .nav.nav-pills li {\n  margin: 3px 3px 3px 0;\n}\n.sort-widget .nav.nav-pills li a {\n  padding: 4px 8px;\n}\n.sort-widget .nav.nav-pills li a .sort {\n  opacity: 0.6;\n}\n.sort-widget .nav.nav-pills li.active a,\n.sort-widget .nav.nav-pills li:hover a,\n.sort-widget .nav.nav-pills li:active a,\n.sort-widget .nav.nav-pills li a:focus {\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) inset;\n}\n.sort-widget .nav.nav-pills li.active a {\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.3);\n}\n",""])},340:function(e,t,n){t=e.exports=n(12)(!1),t.push([e.i,'.tag-selector {\n  position: relative;\n  display: block;\n  width: 100%;\n  color: #000;\n  min-width: 200px;\n  font-size: small;\n}\n.tag-selector .tags {\n  margin-bottom: 4px;\n}\n.tag-selector input {\n  padding-right: 24px;\n}\n.tag-selector .tag {\n  margin: 1px 6px 1px 0px;\n  padding: 3px 26px 3px 6px;\n  background: #DC9;\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5) inset;\n  border-radius: 3px;\n  color: #520;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);\n  display: inline-block;\n  position: relative;\n  font-weight: 500;\n  line-height: 1.2;\n  font-size: 12px;\n  cursor: default;\n}\n.tag-selector .tag:last-of-type {\n  margin-right: 0;\n}\n.tag-selector .tag .tag-remove {\n  position: absolute;\n  top: 4px;\n  right: 5px;\n  color: rgba(0, 0, 0, 0.4);\n  text-shadow: none;\n  opacity: 0.6;\n}\n.tag-selector .tag:hover {\n  background-color: #d7c286;\n}\n.tag-selector .tag:hover .tag-remove {\n  opacity: 0.5;\n}\n.tag-selector .tag:hover .tag-remove:hover {\n  opacity: 1;\n  color: #900;\n}\n.tag-selector .tag.custom {\n  background: #adc2d6;\n  color: #19334d;\n}\n.tag-selector .tag.custom:hover {\n  background-color: #9cb5ce;\n}\n.tag-selector .menu {\n  padding: 4px;\n  top: 100%;\n  width: 100%;\n  text-align: left;\n  max-height: 50vh;\n  overflow: auto;\n  z-index: 10000000000;\n}\n.tag-selector .menu-item {\n  padding: 5px 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: default;\n}\n.tag-selector .menu-item small {\n  line-height: 1.4;\n  font-weight: 400;\n}\n.tag-selector .menu-item .code {\n  width: 110px;\n  display: inline-block;\n  text-align: right;\n  padding-right: 1ex;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  float: left;\n  margin: 1px 0 -1px;\n}\n.tag-selector .menu-item:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n.tag-selector .menu-item.selected {\n  color: #FFF;\n  background: #369;\n  text-shadow: 0 0 1px #000000;\n}\n.tag-selector .menu-item.selected small {\n  color: rgba(255, 255, 255, 0.6);\n  text-shadow: none;\n}\n.tag-selector .menu-item.selected .tag.custom {\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.5);\n}\n.tag-selector .menu-item.custom {\n  font-weight: bold;\n  cursor: pointer;\n  padding: 3px 10px;\n}\n.tag-selector .menu-item.custom + .menu-item {\n  position: relative;\n  overflow: visible;\n  margin-top: 9px;\n}\n.tag-selector .menu-item.custom + .menu-item:before {\n  content: "";\n  display: block;\n  height: 1px;\n  background: #CCC;\n  position: absolute;\n  top: -5px;\n  left: 0;\n  right: 0;\n}\n.tag-selector .menu-item.custom .tag {\n  margin: 0 1px;\n  padding: 3px 6px;\n  line-height: 1;\n}\n.tag-selector.open {\n  outline: none;\n}\n.tag-selector .fa.fa-caret-down {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  pointer-events: none;\n}\n',""])},358:function(e,t,n){"use strict";function r(e){return!0===a(e)&&"[object Object]"===Object.prototype.toString.call(e)}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var a=n(359);e.exports=function(e){var t,n;return!1!==r(e)&&("function"==typeof(t=e.constructor)&&(n=t.prototype,!1!==r(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},359:function(e,t,n){"use strict";/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},360:function(e,t,n){var r=t;r.parse=function(){"use strict";var e,t,n,r,a,o,i={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=[" ","\t","\r","\n","\v","\f"," ","\ufeff"],s=function(e){return""===e?"EOF":"'"+e+"'"},u=function(r){var o=new SyntaxError;throw o.message=r+" at line "+t+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(a.substring(e-1,e+19)),o.at=e,o.lineNumber=t,o.columnNumber=n,o},c=function(o){return o&&o!==r&&u("Expected "+s(o)+" instead of "+s(r)),r=a.charAt(e),e++,n++,("\n"===r||"\r"===r&&"\n"!==p())&&(t++,n=0),r},p=function(){return a.charAt(e)},f=function(){var e=r;for("_"!==r&&"$"!==r&&(r<"a"||r>"z")&&(r<"A"||r>"Z")&&u("Bad identifier as unquoted key");c()&&("_"===r||"$"===r||r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9");)e+=r;return e},d=function(){var e,t="",n="",a=10;if("-"!==r&&"+"!==r||(t=r,c(r)),"I"===r)return e=v(),("number"!=typeof e||isNaN(e))&&u("Unexpected word for number"),"-"===t?-e:e;if("N"===r)return e=v(),isNaN(e)||u("expected word to be NaN"),e;switch("0"===r&&(n+=r,c(),"x"===r||"X"===r?(n+=r,c(),a=16):r>="0"&&r<="9"&&u("Octal literal")),a){case 10:for(;r>="0"&&r<="9";)n+=r,c();if("."===r)for(n+=".";c()&&r>="0"&&r<="9";)n+=r;if("e"===r||"E"===r)for(n+=r,c(),"-"!==r&&"+"!==r||(n+=r,c());r>="0"&&r<="9";)n+=r,c();break;case 16:for(;r>="0"&&r<="9"||r>="A"&&r<="F"||r>="a"&&r<="f";)n+=r,c()}if(e="-"===t?-n:+n,isFinite(e))return e;u("Bad number")},h=function(){var e,t,n,a,o="";if('"'===r||"'"===r)for(n=r;c();){if(r===n)return c(),o;if("\\"===r)if(c(),"u"===r){for(a=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)a=16*a+e;o+=String.fromCharCode(a)}else if("\r"===r)"\n"===p()&&c();else{if("string"!=typeof i[r])break;o+=i[r]}else{if("\n"===r)break;o+=r}}u("Bad string")},m=function(){"/"!==r&&u("Not an inline comment");do{if(c(),"\n"===r||"\r"===r)return void c()}while(r)},g=function(){"*"!==r&&u("Not a block comment");do{for(c();"*"===r;)if(c("*"),"/"===r)return void c("/")}while(r);u("Unterminated block comment")},y=function(){"/"!==r&&u("Not a comment"),c("/"),"/"===r?m():"*"===r?g():u("Unrecognized comment")},b=function(){for(;r;)if("/"===r)y();else{if(!(l.indexOf(r)>=0))return;c()}},v=function(){switch(r){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null;case"I":return c("I"),c("n"),c("f"),c("i"),c("n"),c("i"),c("t"),c("y"),1/0;case"N":return c("N"),c("a"),c("N"),NaN}u("Unexpected "+s(r))},x=function(){var e=[];if("["===r)for(c("["),b();r;){if("]"===r)return c("]"),e;if(","===r?u("Missing array element"):e.push(o()),b(),","!==r)return c("]"),e;c(","),b()}u("Bad array")},w=function(){var e,t={};if("{"===r)for(c("{"),b();r;){if("}"===r)return c("}"),t;if(e='"'===r||"'"===r?h():f(),b(),c(":"),t[e]=o(),b(),","!==r)return c("}"),t;c(","),b()}u("Bad object")};return o=function(){switch(b(),r){case"{":return w();case"[":return x();case'"':case"'":return h();case"-":case"+":case".":return d();default:return r>="0"&&r<="9"?d():v()}},function(i,l){var s;return a=String(i),e=0,t=1,n=1,r=" ",s=o(),b(),r&&u("Syntax error"),"function"==typeof l?function e(t,n){var r,a,o=t[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a=e(o,r),void 0!==a?o[r]=a:delete o[r]);return l.call(t,n,o)}({"":s},""):s}}(),r.stringify=function(e,t,n){function a(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e||"$"===e}function o(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e}function i(e){if("string"!=typeof e)return!1;if(!o(e[0]))return!1;for(var t=1,n=e.length;t<n;){if(!a(e[t]))return!1;t++}return!0}function l(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(e){for(var t=0;t<m.length;t++)if(m[t]===e)throw new TypeError("Converting circular structure to JSON")}function c(e,t,n){if(!e)return"";e.length>10&&(e=e.substring(0,10));for(var r=n?"":"\n",a=0;a<t;a++)r+=e;return r}function p(e){return g.lastIndex=0,g.test(e)?'"'+e.replace(g,function(e){var t=y[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e,t,n){var r,a,o=d(e,t,n);switch(o&&!s(o)&&(o=o.valueOf()),typeof o){case"boolean":return o.toString();case"number":return isNaN(o)||!isFinite(o)?"null":o.toString();case"string":return p(o.toString());case"object":if(null===o)return"null";if(l(o)){u(o),r="[",m.push(o);for(var g=0;g<o.length;g++)a=f(o,g,!1),r+=c(h,m.length),r+=null===a||void 0===a?"null":a,g<o.length-1?r+=",":h&&(r+="\n");m.pop(),o.length&&(r+=c(h,m.length,!0)),r+="]"}else{u(o),r="{";var y=!1;m.push(o);for(var b in o)if(o.hasOwnProperty(b)){var v=f(o,b,!1);n=!1,void 0!==v&&null!==v&&(r+=c(h,m.length),y=!0,t=i(b)?b:p(b),r+=t+":"+(h?" ":"")+v+",")}m.pop(),r=y?r.substring(0,r.length-1)+c(h,m.length)+"}":"{}"}return r;default:return}}if(t&&"function"!=typeof t&&!l(t))throw new Error("Replacer must be a function or an array");var d=function(e,n,r){var a=e[n];return a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),"function"==typeof t?t.call(e,n,a):t?r||l(e)||t.indexOf(n)>=0?a:void 0:a};r.isWord=i;var h,m=[];n&&("string"==typeof n?h=n:"number"==typeof n&&n>=0&&(h=c(" ",n,!0)));var g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b={"":e};return void 0===e?d(b,"",!0):f(b,"",!0)}},369:function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];o(i)&&l(i,a,e)}return e}function a(e,t){if("__proto__"!==t){var n=this[t];o(e)&&o(n)?r(n,e):this[t]=e}}function o(e){return i(e)&&!Array.isArray(e)}var i=n(371),l=n(370);e.exports=r},370:function(e,t,n){"use strict";/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},371:function(e,t,n){"use strict";/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var r=n(358);e.exports=function(e){return r(e)||"function"==typeof e||Array.isArray(e)}},373:function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,s=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)o.call(n,c)&&(s[c]=n[c]);if(a){l=a(n);for(var p=0;p<l.length;p++)i.call(n,l[p])&&(s[l[p]]=n[l[p]])}}return s}},45:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.start||"",n=e.end||"";return t&&n?(t=(0,s.default)(t),n=(0,s.default)(n),t.isSame(n,"day")?i.default.createElement("span",null,t.format("MM/DD/YYYY"),t.isSame(n,"hour")?null:i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("HH:mm"),i.default.createElement("small",{className:"text-muted"}," to "),n.format("HH:mm"))):i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("MM/DD/YYYY"),i.default.createElement("small",{className:"text-muted"}," to "),n.format("MM/DD/YYYY"))):t?(t=(0,s.default)(t),i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," from "),t.format("MM/DD/YYYY"))):n?(n=(0,s.default)(n),i.default.createElement("span",null,i.default.createElement("small",{className:"text-muted"}," to "),n.format("MM/DD/YYYY"))):i.default.createElement("small",{className:"text-muted"},"N/A")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(1),i=r(o),l=n(0),s=r(l)},46:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(62),o=n(98),i=r(o),l=n(47),s=r(l),u=n(22),c=r(u),p=n(48),f=r(p),d=n(326),h=r(d),m=[i.default];t.default=(0,a.createStore)((0,a.combineReducers)({selection:s.default,query:c.default,settings:f.default,urlParams:h.default}),a.applyMiddleware.apply(void 0,m))},47:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){(0,s.setHashParam)("_selection",Object.keys(e).filter(function(t){return e.hasOwnProperty(t)&&!!e[t]}).join(","))}Object.defineProperty(t,"__esModule",{value:!0}),t.setSelectionCleared=t.setAll=t.toggle=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(44),s=n(7),u=(0,s.parseQueryString)(location.hash),c=(0,s.boolVal)(u["single-selection"]),p={};(u._selection||"").split(/\s*,\s*/).forEach(function(e){e&&(c?p=r({},e,!0):p[e]=!0)});var f=i({},p,{selectionCleared:!1}),d="app/selection/TOGGLE";t.toggle=(0,l.createAction)(d),t.setAll=(0,l.createAction)("app/selection/SET_ALL"),t.setSelectionCleared=(0,l.createAction)("app/selection/SELECTION_CLEARED");t.default=(0,l.handleActions)((o={},r(o,d,function(e,t){var n,o=String(t.payload.id),l=(n={},r(n,o,!e[o]&&t.payload),r(n,"selectionCleared",!1),n);return c||(l=i({},e,l)),a(l),l}),r(o,"app/selection/SELECTION_CLEARED",function(e,t){return i({},e,{selectionCleared:!0})}),r(o,"app/selection/SET_ALL",function(e,t){var n=i({},t.payload,{selectionCleared:!1});return a(n),n}),o),f)},48:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.showSelectedOnly=t.replace=t.merge=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(44),s=n(324),u=r(s),c=n(369),p=r(c),f="app/settings/MERGE";t.merge=(0,l.createAction)(f),t.replace=(0,l.createAction)("app/settings/REPLACE"),t.showSelectedOnly=(0,l.createAction)("app/settings/RENDER_SELECTED_ONLY");t.default=(0,l.handleActions)((o={},a(o,f,function(e,t){return(0,p.default)(e,t.payload,{loaded:!0})}),a(o,"app/settings/RENDER_SELECTED_ONLY",function(e,t){return i({},e,{renderSelectedOnly:!!t.payload})}),a(o,"app/settings/REPLACE",function(e,t){return i({},t.payload)}),o),u.default)},530:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return e;var o;return o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},531:function(e,t,n){var r=n(330);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},532:function(e,t,n){var r=n(331);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},533:function(e,t,n){var r=n(332);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},534:function(e,t,n){var r=n(333);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},535:function(e,t,n){var r=n(334);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},536:function(e,t,n){var r=n(335);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},537:function(e,t,n){var r=n(336);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},538:function(e,t,n){var r=n(337);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},539:function(e,t,n){var r=n(338);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},540:function(e,t,n){var r=n(339);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},541:function(e,t,n){var r=n(340);"string"==typeof r&&(r=[[e.i,r,""]]);n(14)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},545:function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)throw new TypeError("header argument is required");if(!t)throw new TypeError("field argument is required");for(var n=Array.isArray(t)?t:a(String(t)),r=0;r<n.length;r++)if(!i.test(n[r]))throw new TypeError("field argument contains an invalid header name");if("*"===e)return e;var o=e,l=a(e.toLowerCase());if(-1!==n.indexOf("*")||-1!==l.indexOf("*"))return"*";for(var s=0;s<n.length;s++){var u=n[s].toLowerCase();-1===l.indexOf(u)&&(l.push(u),o=o?o+", "+n[s]:n[s])}return o}function a(e){for(var t=0,n=[],r=0,a=0,o=e.length;a<o;a++)switch(e.charCodeAt(a)){case 32:r===t&&(r=t=a+1);break;case 44:n.push(e.substring(r,t)),r=t=a+1;break;default:t=a+1}return n.push(e.substring(r,t)),n}function o(e,t){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var n=e.getHeader("Vary")||"";(n=r(Array.isArray(n)?n.join(", "):String(n),t))&&e.setHeader("Vary",n)}/*!
 * vary
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
e.exports=o,e.exports.append=r;var i=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/},546:function(e,t,n){e.exports=n(305)},7:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(e+"",10);return!isNaN(n)&&isFinite(n)||(n=a(t)),n}function o(e){return!/^(false|0|no)$/i.test(String(e))&&(!!/^(true|1|yes)$/i.test(String(e))||!!e)}function i(e){if(e&&"string"==typeof e)return e;var t="Unknown error";if(e&&e instanceof Error?t=String(e):e&&e.responseJSON?t=Array.isArray(e.responseJSON.issue)&&e.responseJSON.issue.length?e.responseJSON.issue.map(function(e){return e.diagnostics||"-"}).join("\n"):e.responseJSON.message||e.responseJSON.error||"Unknown error":e&&e.responseText?t=e.responseText+" - "+e.statusText||"Unknown error":e&&e.statusText&&(t="timeout"==e.statusText?"The server failed to respond in the desired number of seconds":e.statusText||"Unknown error"),t&&"object"==(void 0===t?"undefined":k(t))){var n=[];for(var r in t)n.push(C.createElement("li",{key:r},t[r]));return C.createElement("div",null,["Multiple errors",C.createElement("ul",null,n)])}return String(t).replace(/(Error\:\s)+/,"Error: ")}function l(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(".").reduce(function(e,t){return e?e[t]:void 0},e)}function s(e){var t=[];for(var n in e){(function(n){var r=e[n];if(!r&&0!==r)return"continue";Array.isArray(r)?r.forEach(function(e){(e||0===e)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))})(n)}return t.join("&")}function u(e){var t={};return e=String(e||"").trim().split("?").pop(),e.split(/&/).forEach(function(e){var n=e.split("="),r=decodeURIComponent(n[0]);if(r){var a=decodeURIComponent(n[1]||"true");t.hasOwnProperty(r)?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(a)):t[r]=a}}),t}function c(e,t){var n=location.hash.split("?")[1]||"",r=location.hash.replace(/\?.*/,"");n=u(n||""),void 0===t?n.hasOwnProperty(e)&&delete n[e]:n[e]=t,n=s(n),location.hash=r+(n?"?"+n:"")}function p(e){if(Array.isArray(e))return e.find(function(e){return"MR"==e.code})}function f(e){return e.find(function(e){return!!p(l(e,"type.coding"))})}function d(e){var t=null;return Array.isArray(e.identifier)&&e.identifier.length&&(t=f(e.identifier))?t.value:t}function h(e){if(!e)return"";var t=e.name;if(Array.isArray(t)||(t=[t]),!(t=t[0]))return"";var n=Array.isArray(t.family)?t.family:[t.family],r=Array.isArray(t.given)?t.given:[t.given],a=Array.isArray(t.prefix)?t.prefix:[t.prefix],o=Array.isArray(t.suffix)?t.suffix:[t.suffix];return[a.map(function(e){return String(e||"").trim()}).join(" "),r.map(function(e){return String(e||"").trim()}).join(" "),n.map(function(e){return String(e||"").trim()}).join(" "),o.map(function(e){return String(e||"").trim()}).join(" ")].filter(Boolean).join(" ")}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.telecom||[]).find(function(e){return"phone"==e.system});return t?t.value:""}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.telecom||[]).find(function(e){return"email"==e.system});return t?t.value||"":""}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.address||[];t=t.find(function(e){return"home"==e.use})||t[0]||{};var n=[t.line,t.postalCode,t.city,t.country].map(function(e){return String(e||"").trim()}).filter(Boolean).join(" ");return n||(t.text||"")}function b(e){var t=(0,A.default)(e.birthDate),n=(0,A.default)(e.deceasedDateTime||void 0),r=n-t,a=Math.round(r/1e3);if(a<60)return a+" second";var o=Math.round(a/60);if(o<60)return o+" minute";var i=Math.round(o/60);if(i<24)return i+" hour";var l=Math.round(i/24);if(l<30)return l+" day";var s=Math.round(l/30);return s<24?s+" month":Math.round(l/365)+" year"}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=l(e,"photo.0.data")||"",r=l(e,"photo.0.url")||"",a=l(e,"photo.0.contentType")||"";0===r.indexOf("/")&&(r=t+""+r);var o=r&&r.match(/^https?:\/\//);return!o&&n?(a&&0!==n.indexOf("data:")&&(n="data:"+a+";base64,"+n),r=n):a&&!o&&(r="data:"+a+";base64,"+r),r}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return String(l(e,"coding.0.display")||l(e,"coding.0.code")||e.text||t)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return"string"==typeof e?e||t:x(e,t)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=String(e),a=String(t),o=r;n||(o=o.toLowerCase(),a=a.toLowerCase());var i=o.indexOf(a);return i>-1?r.substr(0,i)+'<span class="search-match">'+r.substr(i,a.length)+"</span>"+r.substr(i+a.length):e}function _(e,t){return C.createElement("span",{dangerouslySetInnerHTML:{__html:t?E(e,t):e}})}function O(e,t){var n=e.link;return n?(n=n.find(function(e){return e.relation===t}),n&&n.url?n.url:null):null}function S(e){e="string"==typeof e?{url:e}:e||{};var t=D.default.extend(!0,e,{headers:{Accept:"application/json+fhir"}});return new Promise(function(e,n){D.default.ajax(t).then(e,function(e){var t=i(e);return n(t&&"string"==typeof t?new Error(t):{message:t})})})}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return S(e).then(function(n){(n.entry||[]).forEach(function(e){e.fullUrl&&-1==t.findIndex(function(t){return t.fullUrl===e.fullUrl})&&t.push(e)});var r=O(n,"next");return r?j(P({},e,{url:r}),t):t})}Object.defineProperty(t,"__esModule",{value:!0});var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.intVal=a,t.boolVal=o,t.getErrorMessage=i,t.getPath=l,t.compileQueryString=s,t.parseQueryString=u,t.setHashParam=c,t.findMRNCoding=p,t.findMRNIdentifier=f,t.getPatientMRN=d,t.getPatientName=h,t.getPatientPhone=m,t.getPatientEmail=g,t.getPatientHomeAddress=y,t.getPatientAge=b,t.getPatientImageUri=v,t.getCodeableConcept=x,t.getCodeOrConcept=w,t.searchHighlight=E,t.renderSearchHighlight=_,t.getBundleURL=O,t.request=S,t.getAllPages=j;var N=n(1),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(N),T=n(0),A=r(T),M=n(19),D=r(M)},99:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(3),p=r(c),f={info:"fa fa-info-circle",warning:"fa fa-exclamation-circle",danger:"fa fa-exclamation-triangle",success:"fa fa-thumbs-up"},d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"container-fluid",style:{width:"100%"}},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("br",null),u.default.createElement("div",{className:"alert alert-"+this.props.type},this.props.close?u.default.createElement("span",{"aria-hidden":"true","data-dismiss":"alert",className:"close",style:{lineHeight:"1.2rem"}},"×"):null,this.props.icon?u.default.createElement("i",{className:f[this.props.type],style:{marginRight:"1ex"}}):null,this.props.children),u.default.createElement("br",null))))}}]),t}(u.default.Component);d.propTypes={type:p.default.oneOf(["info","warning","danger","success"]),close:p.default.bool,icon:p.default.bool,children:p.default.any},d.defaultProps={type:"info",close:!0,icon:!0},t.default=d}},[546]);
//# sourceMappingURL=index.js.4f4517d0ce34f98e1238.map